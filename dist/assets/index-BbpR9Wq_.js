const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MotorPage-CJpbIxdi.js","assets/vendor-AmdHd4rH.js","assets/ItemCarousel-H0N-IdDi.js","assets/chakra-ui-BiWfW4nx.js","assets/i18n-DWgcGZNu.js","assets/giscus-B9mLmbZF.js","assets/recoil-CB4ZXJq9.js","assets/axios-t--hEgTQ.js","assets/CarPage-gM4OxGfj.js","assets/WeaponCustomizer-yCWkFBHz.js","assets/r3f-three-C5Dg3flv.js","assets/r3f-leva-9g6k5QpA.js","assets/OIIA-DBFG_rUA.js"])))=>i.map(i=>d[i]);
import{r as h,z as e,bP as ot,bQ as ct,bR as dt,bS as ht,bT as xt,bU as mt,bV as ke,bW as jt,bX as ut,bY as bs,bZ as ys,b_ as pt,b$ as gt,c0 as ee,c1 as se,c2 as q,c3 as ft,c4 as bt,c5 as yt,c6 as Y,c7 as vt,c8 as St,c9 as wt,ca as Tt,cb as _t,cc as It,cd as Ct,ce as Ft,cf as be,cg as Me,ch as Q,ci as Dt,cj as xe,ck as ns,cl as as,cm as At,cn as Pt,co as b,br as Rt,cp as Lt,cq as Nt}from"./vendor-AmdHd4rH.js";import{C as kt,I as G,S as Mt,a as vs,c as Et,d as Bt,b as Ot,e as zt,B as p,F as L,f as ls,g as ye,T as C,L as ve,H as X,h as I,D as Ut,i as $t,j as qt,k as Vt,l as Ht,m as Wt,n as Ss,M as ws,o as Ts,p as _s,q as Is,r as Se,s as we,A as Gt,t as Jt,u as Yt,v as Kt,w as Qt,x as Xt,y as Ee,z as Zt,E as er,G as sr,J as tr,K as rr,N as nr,O as ar,P as lr,Q as ir,R as or,U as cr,V as Cs,W as dr,X as hr,Y as Fs,Z as Ds,_ as As,$ as Ps,a0 as Rs,a1 as me,a2 as xr,a3 as mr,a4 as jr,a5 as Z,a6 as ae,a7 as Ls,a8 as Ns,a9 as ks,aa as B,ab as y,ac as Ms,ad as ur,ae as Es,af as Bs,ag as Os,ah as zs,ai as Us,aj as $s,ak as qs,al as Vs,am as Hs,an as Ws,ao as O,ap as z,aq as w,ar as a,as as U,at as l,au as is,av as Gs,aw as D,ax as A,ay as H,az as re,aA as Te,aB as _e,aC as Ie,aD as Ce,aE as Fe,aF as De,aG as Ae,aH as Pe,aI as Re,aJ as Le,aK as Ne,aL as os,aM as cs,aN as ds,aO as W,aP as $}from"./chakra-ui-BiWfW4nx.js";import{R as Js,a as pr,b as Ys,c as gr}from"./recoil-CB4ZXJq9.js";import{y as fr,_ as le}from"./giscus-B9mLmbZF.js";import{i as br,B as yr,a as vr,u as E,t as hs}from"./i18n-DWgcGZNu.js";import{a as ne}from"./axios-t--hEgTQ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=i(n);fetch(n.href,c)}})();function Sr(t){return e.jsx(ht,{attribute:"class",disableTransitionOnChange:!0,...t})}function Be(){const{resolvedTheme:t,setTheme:r}=ot();return{colorMode:t,setColorMode:r,toggleColorMode:()=>{r(t==="dark"?"light":"dark")}}}function Ks(t,r){const{colorMode:i}=Be();return i==="dark"?r:t}function wr(){const{colorMode:t}=Be();return t==="dark"?e.jsx(ct,{}):e.jsx(dt,{})}const xs=h.forwardRef(function(r,i){const{toggleColorMode:o}=Be();return e.jsx(kt,{fallback:e.jsx(Mt,{boxSize:"8"}),children:e.jsx(G,{onClick:o,variant:"ghost","aria-label":"Toggle color mode",size:"sm",ref:i,...r,css:{_icon:{width:"5",height:"5"}},children:e.jsx(wr,{})})})});h.forwardRef(function(r,i){return e.jsx(vs,{color:"fg",display:"contents",className:"chakra-theme light",colorPalette:"gray",colorScheme:"light",ref:i,...r})});h.forwardRef(function(r,i){return e.jsx(vs,{color:"fg",display:"contents",className:"chakra-theme dark",colorPalette:"gray",colorScheme:"dark",ref:i,...r})});const Tr=Bt({theme:{tokens:{colors:{primary:{DEFAULT:{value:"#FF6700"},50:{value:"#ffe6d5"},100:{value:"#ffcca9"},200:{value:"#ffb27a"},300:{value:"#ff984a"},400:{value:"#ff7e1a"},500:{value:"#FF6700"},600:{value:"#cc5200"},700:{value:"#993d00"},800:{value:"#662800"},900:{value:"#331400"}},secondary:{DEFAULT:{value:"#15A24E"},50:{value:"#e0f6e8"},100:{value:"#b3e9c5"},200:{value:"#80dba0"},300:{value:"#4dcd7a"},400:{value:"#26bf5e"},500:{value:"#15A24E"},600:{value:"#11853e"},700:{value:"#0d672e"},800:{value:"#094a1e"},900:{value:"#052d0e"}}}},semanticTokens:{colors:{bg:{DEFAULT:{value:{_light:"#F0F7EE",_dark:"#474847"}}},primary:{solid:{value:{_light:"{colors.primary.500}",_dark:"{colors.primary.500}"}},contrast:{value:{_light:"{colors.primary.100}",_dark:"{colors.primary.900}"}},focusRing:{value:{_light:"{colors.primary.500}",_dark:"{colors.primary.600}"}}},secondary:{solid:{value:{_light:"{colors.secondary.500}",_dark:"{colors.secondary.500}"}},contrast:{value:{_light:"{colors.secondary.100}",_dark:"{colors.secondary.900}"}},focusRing:{value:{_light:"{colors.secondary.500}",_dark:"{colors.secondary.600}"}}}}}}}),_r=Et(Ot,Tr);function Ir(t){return e.jsx(zt,{value:_r,children:e.jsx(Sr,{...t})})}br.use(yr).use(vr).init({lng:"zh",fallbackLng:"en",ns:["common","motorPage","carPage","aboutPage","projectPage"],defaultNS:"common",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},interpolation:{escapeValue:!1}});const Cr=({visitorStats:t})=>e.jsx(p,{as:"footer",w:"full",bg:Ks("gray.100","gray.900"),children:e.jsxs(L,{py:2,px:6,alignItems:"center",children:[e.jsx(L,{gap:4}),e.jsx(ls,{}),e.jsx(ye,{size:"lg",color:"red",bg:"red"}),e.jsx(C,{color:"black",children:t?t.data[0].activeUsers:""}),e.jsx(ls,{}),e.jsxs(L,{gap:3,alignItems:"center",children:[e.jsx(ve,{href:"https://github.com/xiuger0x0",target:"_blank",focusRing:"none",children:e.jsx(G,{variant:"ghost",rounded:"full",children:e.jsx(xt,{})})}),e.jsx(ye,{orientation:"vertical",height:"4"}),e.jsx(ve,{href:"https://www.youtube.com/@xiuger0x0",target:"_blank",focusRing:"none",children:e.jsx(G,{variant:"ghost",rounded:"full",children:e.jsx(mt,{})})})]})]})});Js({key:"countState",default:0});const Oe=Js({key:"userState",default:null}),Fr=[{name:"page_title_airsoft",path:"/airsoft",children:[{name:"page_title_airsoft_dashboard",path:"/airsoft/dashboard"},{name:"page_title_airsoft_equipment",path:"/airsoft/equipment"}]},{name:"page_title_telecommunication",path:"/telecommunication",children:[{name:"page_title_telecommunication_dashboard",path:"/telecommunication/dashboard"}]},{name:"page_title_item",path:"/item",children:[{name:"page_title_motor",path:"/item/motorcycle"},{name:"page_title_car",path:"/item/car"}]},{name:"page_title_about",path:"/about"},{name:"元件遊樂場",path:"/playground",isDev:!0}],ms=({direction:t="row",onLinkClick:r})=>{const{t:i}=E("common"),o=ke(),n=ys(),c=Fr.filter(m=>!m.isDev),d=m=>m.split("/")[1];return e.jsx(Ss,{as:"nav",align:"center",flexDirection:t,children:c.map(m=>m.children?e.jsxs(ws,{children:[e.jsx(Ts,{children:e.jsx(p,{p:2,cursor:"pointer",borderBottom:"2px solid",borderBottomColor:d(n.pathname)===d(m.path)?"primary":"transparent",color:d(n.pathname)===d(m.path)?"primary":"inherit",_hover:{borderBottomColor:"primary",color:"primary"},children:i(m.name)})}),e.jsx(_s,{children:e.jsx(Is,{children:e.jsx(Se,{children:m.children.map(j=>e.jsx(we,{value:j.path,onClick:()=>{o(j.path),r==null||r()},children:i(j.name)},j.path))})})})]},m.name):e.jsx(p,{onClick:()=>{o(m.path),r==null||r()},p:2,cursor:"pointer",borderBottom:"2px solid",borderBottomColor:d(n.pathname)===d(m.path)?"primary":"transparent",color:d(n.pathname)===d(m.path)?"primary":"inherit",_hover:{borderBottomColor:"primary",color:"primary"},children:i(m.name)},m.path))})},js=({toggleLanguage:t})=>e.jsx(G,{variant:"ghost",rounded:"full",onClick:t,children:e.jsx(pt,{})}),Dr=({user:t,handleLogout:r})=>e.jsx(X,{gap:"4",children:e.jsxs(ws,{children:[e.jsx(Ts,{children:e.jsxs(Gt,{children:[e.jsx(Jt,{name:t.displayName??""}),e.jsx(Yt,{src:t.pictureUrl??""})]})}),e.jsx(_s,{children:e.jsxs(Is,{children:[e.jsx(Se,{children:e.jsx(we,{value:"displayName",children:e.jsxs(C,{fontWeight:"medium",children:[hs("nickname"),"：",t.displayName]})})}),e.jsx(Kt,{}),e.jsx(Se,{children:e.jsx(we,{value:"logout",onClick:r,color:"fg.error",_hover:{bg:"bg.error",color:"fg.error"},children:hs("logout")})})]})})]})},t.displayName);function Ar(){const[t,r]=pr(Oe),[i,o]=h.useState(!1),[n,c]=h.useState(!1),d=h.useRef(0),{t:m,i18n:j}=E();h.useEffect(()=>{const g=()=>{const T=window.scrollY;T>100&&T>d.current?c(!0):c(!1),d.current=T};return window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)}},[]),h.useEffect(()=>{const g=localStorage.getItem("user");g&&r(JSON.parse(g))},[r]);const F=ke(),P=()=>{F("/login")},R=()=>{r({userId:null,displayName:null,pictureUrl:null,userEmail:null}),localStorage.removeItem("token"),localStorage.removeItem("user"),F("/")},N=()=>{const g=j.language==="zh"?"en":"zh";j.changeLanguage(g)};return e.jsxs(p,{position:"fixed",top:n?"-80px":"0",left:"0",width:"100%",bg:Ks("gray.100","gray.900"),transition:"top 0.3s ease",zIndex:"max",shadow:"xs",children:[e.jsxs(L,{h:14,alignItems:"center",justifyContent:"space-between",mx:4,children:[e.jsx(G,{onClick:()=>o(!i),display:{md:"none"},variant:"ghost",children:i?e.jsx(jt,{}):e.jsx(ut,{})}),e.jsxs(X,{children:[e.jsx(bs,{to:"/",children:e.jsx(p,{p:5,children:e.jsx(C,{fontWeight:"bold",children:"Logo"})})}),e.jsx(X,{as:"nav",display:{base:"none",md:"flex"},children:e.jsx(ms,{direction:"row"})})]}),e.jsxs(L,{gap:2,children:[e.jsxs(p,{display:{base:"none",md:"flex"},children:[e.jsx(xs,{rounded:"full"}),e.jsx(js,{toggleLanguage:N})]}),t!=null&&t.userEmail?e.jsx(Dr,{user:t,handleLogout:R}):e.jsx(I,{color:"green",variant:"surface",onClick:P,children:m("login")})]})]}),e.jsxs(Ut,{open:i,onOpenChange:g=>o(g.open),placement:"top",lazyMount:!0,unmountOnExit:!1,children:[e.jsx($t,{}),e.jsx(qt,{children:e.jsx(Vt,{children:e.jsxs(Ht,{children:[e.jsx(ms,{direction:"column",onLinkClick:()=>o(!1)}),e.jsxs(Wt,{justifyContent:"space-between",children:[e.jsx(xs,{rounded:"full"}),e.jsx(js,{toggleLanguage:N})]})]})})})]})]})}const V=gt({placement:"bottom-end",pauseOnPageIdle:!0}),Pr=()=>e.jsx(ee,{children:e.jsx(Qt,{toaster:V,insetInline:{mdDown:"4"},children:t=>{var r;return e.jsxs(Xt,{width:{md:"sm"},children:[t.type==="loading"?e.jsx(Ee,{size:"sm",color:"blue.solid"}):e.jsx(Zt,{}),e.jsxs(Ss,{gap:"1",flex:"1",maxWidth:"100%",children:[t.title&&e.jsx(er,{children:t.title}),t.description&&e.jsx(sr,{children:t.description})]}),t.action&&e.jsx(tr,{children:t.action.label}),((r=t.meta)==null?void 0:r.closable)&&e.jsx(rr,{})]})}})}),Rr=()=>{const[t,r]=h.useState(null);return h.useEffect(()=>{r({data:[{country:"",activeUsers:"2"},{country:"Taiwan",activeUsers:"2"}]})},[]),e.jsxs(L,{direction:"column",minH:"100vh",children:[e.jsx(Pr,{}),e.jsx(Ar,{}),e.jsx(p,{w:{base:"full",md:"80vw"},mx:"auto",flex:"1",px:{base:2,md:0},mt:14,py:2,children:e.jsx(h.Suspense,{children:e.jsx(se,{})})}),e.jsx(Cr,{visitorStats:t})]})},f=ne.create({baseURL:"/api"});f.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Lr=void 0,Nr=void 0,kr=void 0,Mr=()=>{const t=ke(),r=h.useCallback(async()=>{const o=new URLSearchParams(window.location.search).get("code");if(!o){console.error("❌ No authorization code found!");return}try{const n={grant_type:"authorization_code",code:o,redirect_uri:kr,client_id:Lr,client_secret:Nr},{data:c}=await ne.post("https://api.line.me/oauth2/v2.1/token",new URLSearchParams(n).toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});await f.post("/line/login",{idToken:c.id_token});const{data:d}=await ne.get("https://api.line.me/v2/profile",{headers:{Authorization:`Bearer ${c.access_token}`}}),m={lineId:d.userId,displayName:d.displayName,pictureUrl:d.pictureUrl,email:d.email??null};localStorage.setItem("user",JSON.stringify(m)),await f.post("/line/login",m),console.log("✅ LINE User successfully logged in!"),t("/")}catch(n){console.error("❌ LINE 登入失敗:",n)}},[t]);return h.useEffect(()=>{r()},[r]),e.jsx("div",{children:"登入中..."})},Er=h.forwardRef(function(r,i){const{showArrow:o,children:n,disabled:c,portalled:d=!0,content:m,contentProps:j,portalRef:F,...P}=r;return c?n:e.jsxs(nr,{...P,children:[e.jsx(ar,{asChild:!0,children:n}),e.jsx(ee,{disabled:!d,container:F,children:e.jsx(lr,{children:e.jsxs(ir,{ref:i,...j,children:[o&&e.jsx(or,{children:e.jsx(cr,{})}),m]})})})]})}),K={bg:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"5px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},je=h.forwardRef(function(r,i){return e.jsxs(Cs,{ref:i,children:[e.jsx(dr,{}),e.jsx(hr,{...r})]})}),Br=Fs,ue=As,pe=Ds,ge=Ps,fe=Rs,Or=()=>{const{t:r}=E("common"),{t:i}=E("aboutPage");return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | ",r("page_title_about")]})}),e.jsx(L,{gap:4,flexDirection:"column",children:e.jsx(Er,{content:i("tooltip.topImg"),children:e.jsx(X,{...K,bgImage:"url('/images/about_fp.jpg')",bgSize:"cover",bgPos:"center",bgRepeat:"no-repeat",minH:"80vh",alignItems:"flex-end",shadow:"md",children:e.jsx(p,{...K,p:4,m:4,mt:"250px",w:{base:"100%",md:"auto"},rounded:"md",children:e.jsxs(p,{children:[e.jsxs(Br,{maxW:"600px",children:[e.jsxs(pe,{children:[e.jsx(je,{children:e.jsx(ft,{})}),e.jsxs(ue,{children:[e.jsx(ge,{textStyle:"sm",children:e.jsx(me,{whiteSpace:"normal",wordBreak:"break-word",maxW:"full",children:i("timeline.military")})}),e.jsx(fe,{children:"April 2017 - April 2021"})]})]}),e.jsxs(pe,{children:[e.jsx(je,{children:e.jsx(bt,{})}),e.jsxs(ue,{children:[e.jsx(ge,{textStyle:"sm",children:e.jsx(me,{whiteSpace:"normal",wordBreak:"break-word",maxW:"full",children:i("timeline.training")})}),e.jsx(fe,{children:"June 2022 ~ October 2022"}),e.jsx(C,{fontSize:"xs",children:i("timeline.trainingDetail")})]})]}),e.jsxs(pe,{children:[e.jsx(je,{children:e.jsx(yt,{})}),e.jsxs(ue,{children:[e.jsx(ge,{textStyle:"sm",children:e.jsx(me,{whiteSpace:"normal",wordBreak:"break-word",maxW:"full",children:i("timeline.university")})}),e.jsxs(fe,{children:["June 2023 ~ ",i("timeline.now")]})]})]})]}),e.jsxs(xr,{children:[e.jsx(mr,{children:e.jsxs("cite",{children:[" ",i("philosophy")]})}),e.jsx(jr,{})]})]})})})})})]})},zr=()=>{const{t:r}=E();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | ",r("page_title_home")]})}),e.jsx(p,{children:e.jsx(Z,{align:"stretch",children:e.jsx(fr,{id:"comments",repo:"xiuger0x0/giscus",repoId:"R_kgDOOWgpEA",category:"General",categoryId:"DIC_kwDOOWgpEM4Co7CA",reactionsEnabled:"0",mapping:"specific",strict:"1",term:"VPS留言板",emitMetadata:"1",theme:"noborder_dark",lang:"zh-TW",loading:"lazy"})})})]})},Ur="2006347958-x0PM2Vp1",$r=()=>{const[r,i]=h.useState(null),[o,n]=h.useState(!1),[c,d]=h.useState(!0);h.useEffect(()=>{alert("📢 開始初始化 LIFF..."),Y.init({liffId:Ur}).then(()=>{alert("✅ LIFF 初始化成功！"),n(Y.isInClient()),Y.isLoggedIn()?(alert("🔵 已登入，獲取用戶資料..."),m()):(alert("🔴 未登入，將進行登入..."),Y.login())}).catch(j=>alert("❌ LIFF 初始化失敗："+j.message))},[]);const m=async()=>{try{alert("📢 等待 LIFF SDK 就緒..."),await Y.ready,alert("✅ LIFF SDK 已就緒，開始獲取用戶資料...");const j=await Y.getProfile();alert(`🎉 取得用戶資料成功！
👤 名稱：${j.displayName}`),i({displayName:j.displayName,pictureUrl:j.pictureUrl||"",userId:j.userId,userEmail:""})}catch(j){alert("❌ 取得用戶資料失敗："+j)}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | LIFF"]})}),e.jsx(p,{textAlign:"center",mt:"20px",children:o?c?e.jsx(Ee,{size:"xl"}):r?e.jsxs(e.Fragment,{children:[e.jsxs(ae,{as:"h2",children:["你好, ",r.displayName," 👋"]}),e.jsx(Ls,{src:r.pictureUrl||"",alt:"User Avatar",boxSize:"100px",borderRadius:"full",mt:"10px"})]}):e.jsx(C,{children:"無法獲取用戶資料"}):e.jsx(C,{children:"請使用 LINE 開啟此頁面"})})]})},qr=()=>{const{t:r}=E();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | ",r("page_title_service")]})}),e.jsxs(p,{children:[e.jsx("h1",{children:"Service Page"}),e.jsx("p",{children:"Welcome to the Service Page. Here you can find information about our services."})]})]})},Vr=[{name:"motorcycle",icon:vt},{name:"car",icon:St}],Hr=()=>{const{t:r}=E(),i=ys();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | ",r("page_title_item")]})}),e.jsxs(L,{children:[e.jsx(Ns,{defaultValue:"a",variant:"subtle",orientation:"vertical",position:"fixed",left:4,top:"50%",transform:"translateY(-50%)",zIndex:"max",children:e.jsx(ks,{p:"1",gap:1,borderColor:"gray",...K,children:Vr.map((o,n)=>{const c=i.pathname.includes(o.name);return e.jsx(B,{value:o.name[0],asChild:!0,_hover:{bg:"primary",color:"white"},color:c?"white":"inherit",bg:c?"primary":"",children:e.jsx(bs,{to:o.name,children:e.jsx(o.icon,{})})},n)})})}),e.jsx(p,{flex:1,children:e.jsx(h.Suspense,{children:e.jsx(se,{})})})]})]})},Wr=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | 404"]})}),e.jsx(L,{w:"100vw",h:"100vh",alignItems:"center",justifyContent:"center",fontSize:"2xl",fontWeight:"bold",children:"404 Not Found | 這裡什麼都沒有"})]}),Gr={infinite:!1,speed:500,slidesToShow:2,slidesToScroll:1,dots:!1,arrows:!1,responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1}}]},Jr=[{id:"A_personalWebsite",image:"https://images.unsplash.com/photo-1516796181074-bf453fbfa3e6?auto=format&fit=crop&w=900&q=60",link:"#A"},{id:"B_travelAlbum",image:"https://images.unsplash.com/photo-1438183972690-6d4658e3290e?auto=format&fit=crop&w=2274&q=80",link:"#B"},{id:"C_travelAlbum",image:"https://images.unsplash.com/photo-1438183972690-6d4658e3290e?auto=format&fit=crop&w=2274&q=80",link:"#B"},{id:"D_travelAlbum",image:"https://images.unsplash.com/photo-1438183972690-6d4658e3290e?auto=format&fit=crop&w=2274&q=80",link:"#B"}],Yr=(t,r,i,o)=>[{icon:e.jsx(Tt,{}),title:t(`projects.${r}.timeline.start.title`),description:t(`projects.${r}.timeline.start.description`),period:t(`projects.${r}.timeline.start.period`)},{icon:e.jsx(_t,{}),title:t(`projects.${r}.timeline.draft.title`),description:t(`projects.${r}.timeline.draft.description`),period:t(`projects.${r}.timeline.draft.period`)},{icon:e.jsx(It,{}),title:t(`projects.${r}.timeline.launch.title`),description:t(`projects.${r}.timeline.launch.description`),period:t(`projects.${r}.timeline.launch.period`),image:i,link:o}],Kr=()=>{const{t:r}=E("common"),{t:i}=E("projectPage");return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[void 0," | ",r("page_title_project")]})}),e.jsx(p,{maxW:"100vw",overflow:"hidden",children:e.jsx(wt,{...Gr,children:Jr.map(({id:o,image:n,link:c})=>e.jsx(p,{px:2,children:e.jsx(Fs,{minH:"80vh",maxW:"900px",mx:"auto",p:4,pr:6,...K,children:Yr(i,o,n,c).map((d,m)=>e.jsxs(Ds,{children:[e.jsx(Cs,{children:d.icon}),e.jsxs(As,{children:[e.jsx(Ps,{textStyle:"sm",children:d.title}),e.jsxs(Rs,{children:[d.period&&e.jsx(C,{mb:1,fontSize:"sm",color:"gray.500",children:d.period}),e.jsx(C,{mb:2,children:d.description}),m===2&&d.image&&e.jsx(p,{mb:2,borderRadius:"md",overflow:"hidden",children:e.jsx(Ls,{src:d.image,alt:d.title,aspectRatio:4/2})}),m===2&&d.link&&e.jsx(ve,{href:d.link,color:"teal.500",target:"_blank",rel:"noopener noreferrer",fontWeight:"bold",children:i("viewProject")})]})]})]},m))})},o))})})]})};function Qr(){return e.jsx(p,{style:{width:"100vw",height:"100vh",overflow:"hidden"},children:e.jsx(se,{})})}const Xr=async t=>{const r=t?`/guns/by-member/${t}`:"/guns/getAll";return f.get(r)},Zr=t=>f.post("/guns",t),en=(t,r)=>f.put(`/guns/${t}`,r),sn=t=>f.delete(`/guns/${t}`),tn=()=>{const t=localStorage.getItem("user");if(!t)throw new Error("User not found in localStorage");console.log("User data from localStorage:",t);const r=JSON.parse(t),i=r==null?void 0:r.userId;if(!i)throw new Error("User ID missing");return f.get(`/guns/${i}`)},us=()=>{const[t,r]=h.useState([]),[i,o]=h.useState(!0),[n,c]=h.useState({}),[d,m]=h.useState(null),[j,F]=h.useState(""),[P,R]=h.useState(!1),N=void 0,{t:g}=E("common"),T=async()=>{try{const x=await tn();console.log("Fetched user:",x.data)}catch(x){console.error("Failed to fetch user",x)}},_=async()=>{o(!0);const x=await Xr(j);console.log("Fetched guns:",x.data),r(Array.isArray(x.data)?x.data:[x.data]),o(!1)};h.useEffect(()=>{T(),_()},[]);const k=async()=>{!n.model||!n.serialNumber||(d!==null?await en(d,n):await Zr(n),await _(),c({}),m(null),R(!1))},ie=async x=>{await sn(x),await _()};return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[N," | ",g("page_title_airsoft")]})}),e.jsxs(p,{maxW:"6xl",mx:"auto",p:5,children:[e.jsx(ae,{mb:4,children:"氣槍管理"}),e.jsxs(L,{mb:4,gap:2,wrap:"wrap",align:"flex-end",children:[e.jsx(y,{placeholder:"查詢會員編號",value:j,onChange:x=>F(x.target.value)}),e.jsx(I,{onClick:_,variant:"outline",children:"查詢"}),e.jsxs(Ms,{open:P,onOpenChange:x=>R(x.open),children:[e.jsx(ur,{asChild:!0,children:e.jsx(I,{colorScheme:"blue",children:d!==null?"編輯槍枝":"新增槍枝"})}),e.jsxs(ee,{children:[e.jsx(Es,{}),e.jsx(Bs,{children:e.jsxs(Os,{children:[e.jsx(zs,{children:e.jsx(Us,{children:d?"編輯槍枝":"新增槍枝"})}),e.jsx($s,{children:e.jsxs(L,{direction:"column",gap:3,children:[e.jsx(y,{placeholder:"槍型",value:n.model??"",onChange:x=>c({...n,model:x.target.value})}),e.jsx(y,{placeholder:"序號",value:n.serialNumber??"",onChange:x=>c({...n,serialNumber:x.target.value})}),e.jsx(y,{placeholder:"動力類型 (AEG/Gas/CO2/Manual)",value:n.powerType??"",onChange:x=>c({...n,powerType:x.target.value})}),e.jsx(y,{type:"number",placeholder:"0.25g 彈速",value:n.velocity025??"",onChange:x=>c({...n,velocity025:parseFloat(x.target.value)})}),e.jsx(y,{type:"number",placeholder:"0.36g 彈速",value:n.velocity036??"",onChange:x=>c({...n,velocity036:parseFloat(x.target.value)})}),e.jsx(y,{type:"datetime-local",placeholder:"最後保養時間",value:n.lastMaintenanceAt?n.lastMaintenanceAt.slice(0,16):"",onChange:x=>c({...n,lastMaintenanceAt:x.target.value})})]})}),e.jsxs(qs,{children:[e.jsx(Vs,{asChild:!0,children:e.jsx(I,{variant:"outline",children:"取消"})}),e.jsx(I,{onClick:k,children:d?"更新":"新增"})]}),e.jsx(Hs,{asChild:!0,children:e.jsx(Ws,{size:"sm"})})]})})]})]})]}),i?e.jsx(Ee,{}):e.jsxs(O,{children:[e.jsx(z,{children:e.jsxs(w,{whiteSpace:"nowrap",children:[e.jsx(a,{children:"會員編號"}),e.jsx(a,{children:"槍型"}),e.jsx(a,{children:"序號"}),e.jsx(a,{children:"動力"}),e.jsx(a,{children:"0.25g"}),e.jsx(a,{children:"0.36g"}),e.jsx(a,{children:"上次保養"}),e.jsx(a,{children:"操作"})]})}),e.jsx(U,{children:t.map(x=>e.jsxs(w,{children:[e.jsx(l,{children:x.owner.id}),e.jsx(l,{children:x.model}),e.jsx(l,{children:x.serialNumber}),e.jsx(l,{children:x.powerType}),e.jsx(l,{children:e.jsx(is,{value:x.velocity025,style:"unit",unit:"meter-per-second",minimumFractionDigits:0,maximumFractionDigits:1})}),e.jsx(l,{children:e.jsx(is,{value:x.velocity036,style:"unit",unit:"meter-per-second",minimumFractionDigits:0,maximumFractionDigits:1})}),e.jsx(l,{children:x.lastMaintenanceAt?new Date(x.lastMaintenanceAt).toLocaleString():"—"}),e.jsxs(l,{children:[e.jsx(G,{"aria-label":"edit",onClick:()=>{c(x),m(x.id),R(!0)},mr:2,children:e.jsx(Ct,{})}),e.jsx(G,{"aria-label":"delete",onClick:()=>ie(x.id),colorScheme:"red",children:e.jsx(Ft,{})})]})]},x.id))})]})]})]})},rn={BASIC:"免費會員",PRO:"專業會員 - 1 NTD/月",VIP:"尊榮會員 - 10 NTD/月"},ps=be({items:Object.entries(rn).map(([t,r])=>({label:r,value:t}))}),nn=()=>{const{register:t,handleSubmit:r,control:i,formState:{errors:o},setValue:n,watch:c}=Me({defaultValues:{email:"",password:"",password2:"",displayName:"",phone:"",memberLevel:["BASIC"]}}),[d,m]=h.useState(null),[j,F]=h.useState(!1),P=Ys(Oe),R=c("password"),N=async g=>{var T;try{m(null),F(!1);const _=await f.post("/members/register",g);F(!0);const k={displayName:_.data.displayName,userEmail:_.data.email,token:_.data.token,userId:null,pictureUrl:null,is_admin:!1};localStorage.setItem("user",JSON.stringify(k)),localStorage.setItem("token",k.token),P(k),window.location.href="/"}catch(_){if(ne.isAxiosError(_)){const k=((T=_.response)==null?void 0:T.data)||_.message||"註冊失敗，請稍後再試";m(k)}else m("註冊失敗，請稍後再試")}};return e.jsxs(p,{maxW:"md",mx:"auto",my:10,p:6,...K,children:[e.jsx(Gs,{pb:4,children:e.jsx(ae,{size:"2xl",children:"註冊"})}),e.jsx("form",{onSubmit:r(N),children:e.jsxs(Z,{align:"stretch",children:[e.jsxs(D,{required:!0,children:[e.jsxs(A,{children:["電子郵件 (帳號) ",e.jsx(H,{})]}),e.jsx(y,{type:"email",placeholder:"請輸入電子郵件",...t("email",{required:"請輸入電子郵件",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"電子郵件格式不正確"}})}),o.email&&e.jsx(re,{color:"red.500",children:o.email.message})]}),e.jsxs(D,{required:!0,children:[e.jsxs(A,{children:["密碼 ",e.jsx(H,{})]}),e.jsx(y,{type:"password",placeholder:"密碼",...t("password",{required:"請輸入密碼"})}),o.password&&e.jsx(re,{color:"red.500",children:o.password.message})]}),e.jsxs(D,{required:!0,children:[e.jsxs(A,{children:["再次輸入密碼 ",e.jsx(H,{})]}),e.jsx(y,{type:"password",placeholder:"請再次輸入密碼",...t("password2",{required:"請再次輸入密碼",validate:g=>g===R||"密碼輸入不一致"})}),o.password2&&e.jsx(re,{color:"red.500",children:o.password2.message})]}),e.jsxs(D,{required:!0,children:[e.jsxs(A,{children:["暱稱 ",e.jsx(H,{})]}),e.jsx(y,{placeholder:"暱稱",...t("displayName")})]}),e.jsxs(D,{children:[e.jsx(A,{children:"電話"}),e.jsx(y,{placeholder:"電話",...t("phone")})]}),e.jsxs(D,{required:!0,children:[e.jsxs(A,{children:["會員等級 ",e.jsx(H,{})]}),e.jsx(Q,{name:"memberLevel",control:i,rules:{validate:g=>Array.isArray(g)&&g.length>0||"請選擇會員等級"},render:({field:g})=>e.jsxs(Te,{name:g.name,value:g.value,onValueChange:T=>n("memberLevel",T.value),onInteractOutside:()=>g.onBlur(),collection:ps,children:[e.jsx(_e,{}),e.jsxs(Ie,{children:[e.jsx(Ce,{children:e.jsx(Fe,{placeholder:"請選擇會員等級"})}),e.jsx(De,{children:e.jsx(Ae,{})})]}),e.jsx(ee,{children:e.jsx(Pe,{children:e.jsx(Re,{children:ps.items.map(T=>e.jsxs(Le,{item:T,children:[T.label,e.jsx(Ne,{})]},T.value))})})})]})}),o.memberLevel&&e.jsx(re,{color:"red.500",children:o.memberLevel.message})]}),d&&e.jsxs(os,{status:"error",children:[e.jsx(cs,{}),e.jsx(ds,{children:d})]}),j&&e.jsxs(os,{status:"success",children:[e.jsx(cs,{}),e.jsx(ds,{children:"註冊成功！"})]}),e.jsx(I,{colorScheme:"teal",type:"submit",children:"送出"})]})})]})},an=({onLogin:t,onLineLogin:r,onRegister:i})=>{const{control:o,handleSubmit:n,formState:{errors:c,isSubmitting:d}}=Me(),m=j=>{t(j)};return e.jsxs(p,{maxW:"md",mx:"auto",my:10,p:6,rounded:"xl",...K,children:[e.jsx(Gs,{pb:4,children:e.jsx(ae,{size:"2xl",children:"登入"})}),e.jsx("form",{onSubmit:n(m),children:e.jsxs(Z,{align:"stretch",children:[e.jsx(Q,{name:"email",control:o,rules:{required:"請輸入帳號"},render:({field:j})=>e.jsxs(D,{invalid:!!c.email,required:!0,children:[e.jsxs(A,{children:["帳號 ",e.jsx(H,{})]}),e.jsx(y,{...j}),c.email&&e.jsx(W,{children:c.email.message})]})}),e.jsx(Q,{name:"password",control:o,rules:{required:"請輸入密碼"},render:({field:j})=>e.jsxs(D,{invalid:!!c.password,required:!0,children:[e.jsxs(A,{children:["密碼",e.jsx(H,{})]}),e.jsx(y,{...j,type:"password"}),c.password&&e.jsx(W,{children:c.password.message})]})}),e.jsx(I,{colorScheme:"teal",type:"submit",disabled:d,width:"100%",children:"登入"})]})}),e.jsx(ye,{my:6}),e.jsxs(Z,{align:"center",children:[e.jsx(C,{color:"gray.500",fontSize:"sm",children:"或使用其他方式登入"}),e.jsx(I,{onClick:r,bg:"#06C755",color:"white",_hover:{bg:"#05B34F"},width:"100%",children:"使用 LINE 登入"}),e.jsx(I,{onClick:i,colorScheme:"teal",fontSize:"sm",width:"100%",children:"還沒有帳號嗎？前往註冊"})]})]})},ln=()=>e.jsx(p,{children:e.jsx(se,{})}),on=()=>e.jsx(p,{children:e.jsx(se,{})}),gs=()=>{var Ze,es,ss,ts,rs;const[t,r]=h.useState("user"),[i,o]=h.useState(""),[n,c]=h.useState([]),[d,m]=h.useState([]),[j,F]=h.useState([]),[P,R]=h.useState([]),[N,g]=h.useState([]),[T,_]=h.useState([]),[k,ie]=h.useState([]),[x,te]=h.useState(!1),ze=new Date().getFullYear(),Ue=new Date().getMonth()+1,[$e,Qs]=h.useState(ze),[qe,Xs]=h.useState(Ue),[v,Ve]=h.useState(null),[He,We]=h.useState(null),Ge=()=>{c([]),m([]),F([]),R([]),g([]),_([]),Ve(null),We(null)},oe=async(s,u=ze,S=Ue)=>{try{const J=await f.get("/telecom/bills",{params:{phone:s,year:u,month:S}});_(J.data)}catch{V.create({title:"查詢帳單失敗",description:"請確認查詢條件或稍後再試。",type:"error"}),_([])}},Zs=async()=>{try{const u=(await f.post("/telecom/generate-bills")).data.map(S=>({userId:S.user.id,phoneNumber:S.user.phoneNumber,userName:S.user.name,planName:S.user.currentPlan.name,baseFee:S.baseFee,callFee:S.callFee,smsFee:S.smsFee,dataFee:S.dataFee,discount:S.discountTotal,totalAmount:S.totalAmount,issuedAt:S.issuedAt,paidAt:S.paidAt??null}));_(u),V.create({title:"模擬成功",description:"帳單已產生。",type:"success"})}catch{V.create({title:"模擬失敗",description:"無法產生帳單，請稍後再試。",type:"error"})}},et=async()=>{try{const s=await f.get("/telecom/users/usage-summary",{params:{phone:i}});Ve(s.data),We(s.data.mostContacted||null)}catch(s){console.error("取得使用摘要失敗",s)}},st=async()=>{const s=await f.get("/telecom/plans");return ie(s.data),s.data},Je=async()=>{Ge();try{const[s,u,S,J,he]=await Promise.all([f.get("/telecom/users"),f.get("/telecom/calls"),f.get("/telecom/sms"),f.get("/telecom/data-usage"),f.get("/telecom/data-usage/top10"),oe()]);c(s.data),m(u.data),F(S.data),R(J.data),g(he.data)}catch{V.create({title:"查詢失敗",description:"無法查詢用戶與使用紀錄，請稍後再試。",type:"error"})}},Ye=async s=>{if(!s){Je();return}Ge();try{const[u,S,J,he]=await Promise.all([f.get("/telecom/calls",{params:{phone:s}}),f.get("/telecom/users",{params:{phone:s}}),f.get("/telecom/sms",{params:{phone:s}}),f.get("/telecom/data-usage",{params:{phone:s}}),oe(s)]);c(S.data),m(u.data),F(J.data),R(he.data),et()}catch{V.create({title:"查詢失敗",description:"無法查詢用戶資訊與紀錄，請稍後再試。",type:"error"})}};h.useEffect(()=>{Ye(),st()},[]);const Ke=be({items:[{label:"月租",value:"POSTPAID"},{label:"預付",value:"PREPAID"}]}),Qe=k.map(s=>({id:s.id,value:s.id.toString(),label:`${s.name} ${s.monthlyFee}元/月`,name:s.name,monthlyFee:s.monthlyFee})),tt=be({items:Qe}),rt=Dt({name:xe().min(1,{message:"請輸入姓名"}).max(20,{message:"姓名不能超過 20 字元"}),number:xe().length(8,{message:"門號長度必須為 8 位數"}),subscriberType:ns(as(["POSTPAID","PREPAID"],{required_error:"請選擇訂閱者類型",invalid_type_error:"無效的訂閱者類型"})).min(1,{message:"請至少選擇一種訂閱者類型"}).max(1,{message:"最多只能選擇一種訂閱者類型"}),planId:ns(as(["1","2","3"],{invalid_type_error:"無效的方案 ID"})).optional(),ssn:xe().length(10,{message:"SSN 必須為 10 位數"})}).refine(s=>!s.subscriberType.includes("POSTPAID")||s.planId&&s.planId.length>0,{path:["planId"],message:"月租型用戶請選擇方案"}),{handleSubmit:nt,control:Xe,register:ce,formState:{errors:M},watch:at,reset:de}=Me({resolver:At(rt)}),lt=(at("subscriberType")??[]).includes("POSTPAID"),it=async s=>{try{await f.post("/telecom/register",{name:s.name,number:s.number,planId:s.planId,subscriberType:s.subscriberType,ssn:s.ssn}).then(()=>{de(),te(!1)}),V.create({title:"註冊成功",description:"用戶已成功註冊。",type:"success",duration:3e3}),Je()}catch{alert("註冊失敗")}};return e.jsxs(p,{p:6,children:[e.jsxs(Ns,{value:t,onValueChange:s=>r(s.value),children:[e.jsxs(ks,{children:[e.jsx(B,{value:"plan",children:"方案一覽"}),e.jsx(B,{value:"user",children:"用戶列表"}),e.jsx(B,{value:"info",children:"用戶細節"}),e.jsx(B,{value:"usage_call",children:"通話紀錄 (30日)"}),e.jsx(B,{value:"usage_data",children:"流量紀錄 (30日)"}),!i&&e.jsx(B,{value:"usage_data_top10",children:"流量排行前十"}),e.jsx(B,{value:"usage_sms",children:"簡訊紀錄"}),e.jsx(B,{value:"invoice",children:"帳單紀錄"})]}),e.jsxs(X,{my:4,children:[e.jsx(y,{placeholder:"輸入門號",value:i,onChange:s=>o(s.target.value)}),e.jsx(I,{onClick:()=>Ye(i),children:"查詢"}),e.jsx(I,{colorScheme:"blue",onClick:()=>te(!0),children:"➕ 新增用戶"})]}),e.jsx($,{value:"user",children:n.length>0&&e.jsxs(O,{mt:6,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"用戶 ID"}),e.jsx(a,{children:"姓名"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"方案"}),e.jsx(a,{children:"申辦時間"}),e.jsx(a,{children:"SSN"}),e.jsx(a,{children:"地址"}),e.jsx(a,{children:"城市"}),e.jsx(a,{children:"國家"}),e.jsx(a,{children:"郵遞區號"})]})}),e.jsx(U,{children:n.map(s=>e.jsxs(w,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.number}),e.jsx(l,{children:s.planName}),e.jsx(l,{children:s.createdAt}),e.jsx(l,{children:s.ssn||"限管理者檢視"}),e.jsx(l,{children:s.address||"無資料"}),e.jsx(l,{children:s.city||"無資料"}),e.jsx(l,{children:s.country||"無資料"}),e.jsx(l,{children:s.postalCode||"無資料"})]},s.id))})]})}),e.jsx($,{value:"plan",children:e.jsx(p,{mt:4,children:e.jsxs(O,{size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"方案 ID"}),e.jsx(a,{children:"方案名稱"}),e.jsx(a,{children:"月租費用"}),e.jsx(a,{children:"免費簡訊數"}),e.jsx(a,{children:"包含流量 (MB)"}),e.jsx(a,{children:"計費類型"}),e.jsx(a,{children:"資料政策"}),e.jsx(a,{children:"超出費用政策"}),e.jsx(a,{children:"限速政策"}),e.jsx(a,{children:"生效日期"})]})}),e.jsx(U,{children:k.map(s=>e.jsxs(w,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:s.name}),e.jsxs(l,{children:["$",s.monthlyFee]}),e.jsx(l,{children:s.includedSms}),e.jsx(l,{children:s.includedDataMb!=99999?`${s.includedDataMb} MB`:"不限"}),e.jsx(l,{children:s.billingType==="POSTPAID"?"月租":"預付"}),e.jsx(l,{children:s.dataPolicy}),e.jsx(l,{children:s.overagePolicy==="THROTTLE"?`限速 ${s.throttleSpeedKbps} Kbps`:"無額外費用"}),e.jsx(l,{children:s.throttleAfterMb?`${s.throttleAfterMb} MB 後限速 `:"無限速限制"}),e.jsx(l,{children:s.effectiveFrom?new Date(s.effectiveFrom).toLocaleDateString():"無生效日期"})]},s.id))})]})})}),e.jsxs($,{value:"usage_call",children:[d.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"發送人 (ID)"}),e.jsx(a,{children:"時間"}),e.jsx(a,{children:"對象"}),e.jsx(a,{children:"時長 (分鐘)"})]})}),e.jsx(U,{children:d.map((s,u)=>e.jsxs(w,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:s.timestamp}),e.jsx(l,{children:s.receiver}),e.jsx(l,{children:s.durationMinutes})]},u))})]}):e.jsx(p,{mt:4,children:"尚無通話紀錄"}),e.jsxs(C,{m:2,children:["總筆數：",d.length]})]}),e.jsxs($,{value:"usage_sms",children:[j.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"發送人 (ID)"}),e.jsx(a,{children:"發送時間"}),e.jsx(a,{children:"對象"}),e.jsx(a,{children:"狀態"})]})}),e.jsx(U,{children:j.map((s,u)=>e.jsxs(w,{children:[e.jsx(l,{children:s.userId}),e.jsx(l,{children:s.sentAt}),e.jsx(l,{children:s.recipient}),e.jsx(l,{children:s.status})]},u))})]}):e.jsx(p,{mt:4,children:"尚無簡訊紀錄"}),e.jsxs(C,{m:2,children:["總筆數：",j.length]})]}),e.jsxs($,{value:"usage_data",children:[P.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"用戶ID"}),e.jsx(a,{children:"用戶名稱"}),e.jsx(a,{children:"上傳 (MB)"}),e.jsx(a,{children:"下載 (MB)"}),e.jsx(a,{children:"總流量 (MB)"})]})}),e.jsx(U,{children:P.map((s,u)=>e.jsxs(w,{children:[e.jsx(l,{children:s.userId}),e.jsx(l,{children:s.userName}),e.jsx(l,{children:s.uploadMb}),e.jsx(l,{children:s.downloadMb}),e.jsx(l,{children:s.totalMb})]},u))})]}):e.jsx(p,{mt:4,children:"尚無流量紀錄"}),e.jsxs(C,{m:2,children:["總筆數：",P.length]})]}),!i&&e.jsxs($,{value:"usage_data_top10",children:[N.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"用戶ID"}),e.jsx(a,{children:"用戶名稱"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"總流量 (MB)"})]})}),e.jsx(U,{children:N.map((s,u)=>e.jsxs(w,{children:[e.jsx(l,{children:s.userId}),e.jsx(l,{children:s.userName}),e.jsx(l,{children:s.phoneNumber}),e.jsx(l,{children:s.totalUsageMb.toFixed(2)})]},u))})]}):e.jsx(p,{mt:4,children:"尚無流量排行前十紀錄"}),e.jsxs(C,{m:2,children:["總筆數：",N.length]})]}),e.jsx($,{value:"info",children:e.jsxs(p,{mt:5,children:[He&&e.jsxs(C,{mb:2,children:["最常聯絡對象: ",He||"無資料"]}),(v&&e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"使用者"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"方案名稱"}),e.jsx(a,{children:"通話次數"}),e.jsx(a,{children:"簡訊次數"}),e.jsx(a,{children:"總上網用量(MB)"})]})}),e.jsx(U,{children:e.jsxs(w,{children:[e.jsx(l,{children:v==null?void 0:v.user.name}),e.jsx(l,{children:v==null?void 0:v.user.phoneNumber}),e.jsx(l,{children:v==null?void 0:v.user.currentPlan.name}),e.jsx(l,{children:v==null?void 0:v.callCount}),e.jsx(l,{children:v==null?void 0:v.smsCount}),e.jsxs(l,{children:[v==null?void 0:v.totalDataUsageMb.toFixed(2)," MB"]})]})})]}))??e.jsx(p,{mt:4,children:"尚未查詢用戶使用明細"})]})}),e.jsxs($,{value:"invoice",children:[e.jsxs(p,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(y,{type:"number",placeholder:"年份",value:$e,onChange:s=>Qs(Number(s.target.value))}),e.jsx(y,{type:"number",placeholder:"月份",value:qe,onChange:s=>Xs(Number(s.target.value))}),e.jsx(I,{onClick:()=>oe(i,$e,qe),children:"查詢"}),e.jsx(I,{variant:"surface",color:"orange",onClick:Zs,children:"模擬帳單(所有用戶)"})]}),T.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(w,{children:[e.jsx(a,{children:"姓名"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"方案"}),e.jsx(a,{children:"基本費"}),e.jsx(a,{children:"通話費"}),e.jsx(a,{children:"簡訊費"}),e.jsx(a,{children:"上網費"}),e.jsx(a,{children:"折扣"}),e.jsx(a,{children:"總金額"}),e.jsx(a,{children:"帳單日"}),e.jsx(a,{children:"繳款時間"})]})}),e.jsx(U,{children:T.map((s,u)=>e.jsxs(w,{children:[e.jsx(l,{children:s.userName}),e.jsx(l,{children:s.phoneNumber}),e.jsx(l,{children:s.planName}),e.jsxs(l,{children:["$",s.baseFee.toFixed(2)]}),e.jsxs(l,{children:["$",s.callFee.toFixed(2)]}),e.jsxs(l,{children:["$",s.smsFee.toFixed(2)]}),e.jsxs(l,{children:["$",s.dataFee.toFixed(2)]}),e.jsxs(l,{children:["-$",s.discount.toFixed(2)]}),e.jsx(l,{children:e.jsxs("strong",{children:["$",s.totalAmount.toFixed(2)]})}),e.jsx(l,{children:new Date(s.issuedAt).toLocaleString()}),e.jsx(l,{children:s.planName!=="預付卡方案"?s.paidAt?new Date(s.paidAt).toLocaleString():"尚未繳款":"無繳款資訊"})]},u))})]}):e.jsx(p,{mt:4,children:"尚無帳單紀錄 (未產生)"})]})]}),x&&e.jsx(Ms,{open:x,children:e.jsxs(ee,{children:[e.jsx(Es,{}),e.jsx(Bs,{children:e.jsxs(Os,{children:[e.jsx(zs,{children:e.jsx(Us,{children:"新增用戶"})}),e.jsx($s,{children:e.jsx("form",{children:e.jsxs(Z,{children:[e.jsxs(D,{invalid:!!M.name,children:[e.jsx(A,{children:"姓名"}),e.jsx(y,{placeholder:"輸入姓名",...ce("name")}),e.jsx(W,{children:(Ze=M.name)==null?void 0:Ze.message})]}),e.jsxs(D,{invalid:!!M.ssn,children:[e.jsx(A,{children:"SSN"}),e.jsx(y,{placeholder:"輸入 SSN",...ce("ssn"),maxLength:10}),e.jsx(W,{children:(es=M.ssn)==null?void 0:es.message})]}),e.jsxs(D,{invalid:!!M.number,children:[e.jsx(A,{children:"門號"}),e.jsx(y,{placeholder:"輸入門號",...ce("number"),maxLength:8}),e.jsx(W,{children:(ss=M.number)==null?void 0:ss.message})]}),e.jsxs(D,{invalid:!!M.subscriberType,children:[e.jsx(A,{children:"訂閱者類型"}),e.jsx(Q,{control:Xe,name:"subscriberType",render:({field:s})=>e.jsxs(Te,{onValueChange:({value:u})=>{s.onChange(u)},onInteractOutside:()=>s.onBlur(),collection:Ke,children:[e.jsx(_e,{name:s.name}),e.jsxs(Ie,{children:[e.jsx(Ce,{children:e.jsx(Fe,{placeholder:"選擇訂閱者類型"})}),e.jsx(De,{children:e.jsx(Ae,{})})]}),e.jsx(Pe,{children:e.jsx(Re,{children:Ke.items.map(u=>e.jsxs(Le,{item:u,children:[u.label,e.jsx(Ne,{})]},u.value))})})]})}),e.jsx(W,{children:(ts=M.subscriberType)==null?void 0:ts.message})]}),lt&&e.jsxs(D,{invalid:!!M.planId,children:[e.jsx(A,{children:"選擇方案"}),e.jsx(Q,{control:Xe,name:"planId",render:({field:s})=>e.jsxs(Te,{onValueChange:({value:u})=>{s.onChange(u)},onInteractOutside:()=>s.onBlur(),collection:tt,children:[e.jsx(_e,{name:s.name}),e.jsxs(Ie,{children:[e.jsx(Ce,{children:e.jsx(Fe,{placeholder:"請選擇方案"})}),e.jsx(De,{children:e.jsx(Ae,{})})]}),e.jsx(Pe,{children:e.jsx(Re,{children:Qe.map(u=>e.jsxs(Le,{item:u,children:[u.name," ",u.monthlyFee,"元/月",e.jsx(Ne,{})]},u.id))})})]})}),e.jsx(W,{children:(rs=M.planId)==null?void 0:rs.message})]})]})})}),e.jsxs(qs,{children:[e.jsx(Vs,{asChild:!0,children:e.jsx(I,{variant:"outline",onClick:()=>{de(),te(!1)},children:"取消"})}),e.jsx(I,{onClick:nt(it),children:"儲存"})]}),e.jsx(Hs,{asChild:!0,onClick:()=>{de(),te(!1)},children:e.jsx(Ws,{size:"sm"})})]})})]})})]})},fs=h.lazy(()=>le(()=>import("./MotorPage-CJpbIxdi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),cn=h.lazy(()=>le(()=>import("./CarPage-gM4OxGfj.js"),__vite__mapDeps([8,1,4,5,2,3,6,7]))),dn=h.lazy(()=>le(()=>import("./WeaponCustomizer-yCWkFBHz.js"),__vite__mapDeps([9,1,10,11,3]))),hn=h.lazy(()=>le(()=>import("./OIIA-DBFG_rUA.js"),__vite__mapDeps([12,1,10,3]))),xn=void 0,mn=void 0,jn=`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${xn}&redirect_uri=${encodeURIComponent(mn)}&state=12345&scope=profile%20openid%20email`;function un(){const r=Ys(Oe);return e.jsxs(Pt,{children:[e.jsx(b,{path:"/callback",element:e.jsx(Mr,{})}),e.jsx(b,{path:"/liff",element:e.jsx($r,{})}),e.jsxs(b,{path:"/",element:e.jsx(Rr,{}),children:[e.jsx(b,{path:"/",element:e.jsx(zr,{}),index:!0}),e.jsx(b,{path:"register",element:e.jsx(nn,{})}),e.jsx(b,{path:"login",element:e.jsx(an,{onLogin:async i=>{try{const o=await f.post("/members/login",i),n={userId:o.data.id??null,displayName:o.data.displayName??null,pictureUrl:o.data.pictureUrl??null,userEmail:o.data.email??null};localStorage.setItem("token",o.data.token),localStorage.setItem("user",JSON.stringify(n)),r(n),window.location.href="/"}catch{alert("登入失敗")}},onLineLogin:()=>{window.location.href=jn},onRegister:()=>{window.location.href="/register"}})}),e.jsx(b,{path:"/about",element:e.jsx(Or,{})}),e.jsx(b,{path:"/project",element:e.jsx(Kr,{})}),e.jsx(b,{path:"/service",element:e.jsx(qr,{})}),e.jsxs(b,{path:"/item",element:e.jsx(Hr,{}),children:[e.jsx(b,{index:!0,element:e.jsx(fs,{})}),e.jsx(b,{path:"motorcycle",element:e.jsx(fs,{})}),e.jsx(b,{path:"car",element:e.jsx(cn,{})})]}),e.jsxs(b,{path:"/airsoft",element:e.jsx(ln,{}),children:[e.jsx(b,{index:!0,element:e.jsx(us,{})}),e.jsx(b,{path:"dashboard",element:e.jsx(us,{})})]}),e.jsxs(b,{path:"/telecommunication",element:e.jsx(on,{}),children:[e.jsx(b,{index:!0,element:e.jsx(gs,{})}),e.jsx(b,{path:"dashboard",element:e.jsx(gs,{})})]})]}),e.jsx(b,{path:"/customizer",element:e.jsx(Qr,{}),children:e.jsx(b,{index:!0,element:e.jsx(dn,{})})}),!1,e.jsx(b,{path:"oiia",element:e.jsx(hn,{})}),e.jsx(b,{path:"/*",element:e.jsx(Wr,{})})]})}Rt.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(gr,{children:e.jsx(Lt,{children:e.jsx(Ir,{children:e.jsx(Nt,{children:e.jsx(un,{})})})})})}));export{K as g};
