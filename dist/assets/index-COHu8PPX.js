const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MotorPage-CCfxUzxs.js","assets/vendor-AmdHd4rH.js","assets/ItemCarousel-H0N-IdDi.js","assets/chakra-ui-BiWfW4nx.js","assets/i18n-DWgcGZNu.js","assets/giscus-B9mLmbZF.js","assets/recoil-CB4ZXJq9.js","assets/axios-t--hEgTQ.js","assets/CarPage-DxGIB8Qr.js","assets/WeaponCustomizer-yCWkFBHz.js","assets/r3f-three-C5Dg3flv.js","assets/r3f-leva-9g6k5QpA.js","assets/OIIA-DBFG_rUA.js"])))=>i.map(i=>d[i]);
import{r as d,z as e,bP as ot,bQ as ct,bR as dt,bS as ht,bT as xt,bU as jt,bV as Ne,bW as mt,bX as ut,bY as bs,bZ as ys,b_ as pt,b$ as gt,c0 as ee,c1 as se,c2 as q,c3 as ft,c4 as bt,c5 as yt,c6 as X,c7 as vt,c8 as St,c9 as wt,ca as Tt,cb as _t,cc as It,cd as Ct,ce as Dt,cf as be,cg as Me,ch as K,ci as Ft,cj as xe,ck as ns,cl as as,cm as Lt,cn as Rt,co as b,br as At,cp as Pt,cq as kt}from"./vendor-AmdHd4rH.js";import{C as Nt,I as G,S as Mt,a as vs,c as Et,d as Bt,b as Ot,e as zt,B as p,F as P,f as ls,g as ye,T as D,L as ve,H as Q,h as C,D as Ut,i as $t,j as qt,k as Vt,l as Ht,m as Wt,n as Ss,M as ws,o as Ts,p as _s,q as Is,r as Se,s as we,A as Gt,t as Jt,u as Xt,v as Yt,w as Kt,x as Qt,y as Ee,z as Zt,E as er,G as sr,J as tr,K as rr,N as nr,O as ar,P as lr,Q as ir,R as or,U as cr,V as Cs,W as dr,X as hr,Y as Ds,Z as Fs,_ as Ls,$ as Rs,a0 as As,a1 as je,a2 as xr,a3 as jr,a4 as mr,a5 as Z,a6 as ae,a7 as Ps,a8 as ks,a9 as Ns,aa as B,ab as y,ac as Ms,ad as ur,ae as Es,af as Bs,ag as Os,ah as zs,ai as Us,aj as $s,ak as qs,al as Vs,am as Hs,an as Ws,ao as O,ap as z,aq as T,ar as a,as as U,at as l,au as is,av as Gs,aw as F,ax as L,ay as H,az as re,aA as Te,aB as _e,aC as Ie,aD as Ce,aE as De,aF as Fe,aG as Le,aH as Re,aI as Ae,aJ as Pe,aK as ke,aL as os,aM as cs,aN as ds,aO as W,aP as $}from"./chakra-ui-BiWfW4nx.js";import{R as Js,a as pr,b as Xs,c as gr}from"./recoil-CB4ZXJq9.js";import{y as fr,_ as le}from"./giscus-B9mLmbZF.js";import{i as br,B as yr,a as vr,u as E,t as hs}from"./i18n-DWgcGZNu.js";import{a as ne}from"./axios-t--hEgTQ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=i(n);fetch(n.href,c)}})();function Sr(t){return e.jsx(ht,{attribute:"class",disableTransitionOnChange:!0,...t})}function Be(){const{resolvedTheme:t,setTheme:r}=ot();return{colorMode:t,setColorMode:r,toggleColorMode:()=>{r(t==="dark"?"light":"dark")}}}function Ys(t,r){const{colorMode:i}=Be();return i==="dark"?r:t}function wr(){const{colorMode:t}=Be();return t==="dark"?e.jsx(ct,{}):e.jsx(dt,{})}const xs=d.forwardRef(function(r,i){const{toggleColorMode:o}=Be();return e.jsx(Nt,{fallback:e.jsx(Mt,{boxSize:"8"}),children:e.jsx(G,{onClick:o,variant:"ghost","aria-label":"Toggle color mode",size:"sm",ref:i,...r,css:{_icon:{width:"5",height:"5"}},children:e.jsx(wr,{})})})});d.forwardRef(function(r,i){return e.jsx(vs,{color:"fg",display:"contents",className:"chakra-theme light",colorPalette:"gray",colorScheme:"light",ref:i,...r})});d.forwardRef(function(r,i){return e.jsx(vs,{color:"fg",display:"contents",className:"chakra-theme dark",colorPalette:"gray",colorScheme:"dark",ref:i,...r})});const Tr=Bt({theme:{tokens:{colors:{primary:{DEFAULT:{value:"#FF6700"},50:{value:"#ffe6d5"},100:{value:"#ffcca9"},200:{value:"#ffb27a"},300:{value:"#ff984a"},400:{value:"#ff7e1a"},500:{value:"#FF6700"},600:{value:"#cc5200"},700:{value:"#993d00"},800:{value:"#662800"},900:{value:"#331400"}},secondary:{DEFAULT:{value:"#15A24E"},50:{value:"#e0f6e8"},100:{value:"#b3e9c5"},200:{value:"#80dba0"},300:{value:"#4dcd7a"},400:{value:"#26bf5e"},500:{value:"#15A24E"},600:{value:"#11853e"},700:{value:"#0d672e"},800:{value:"#094a1e"},900:{value:"#052d0e"}}}},semanticTokens:{colors:{bg:{DEFAULT:{value:{_light:"#F0F7EE",_dark:"#474847"}}},primary:{solid:{value:{_light:"{colors.primary.500}",_dark:"{colors.primary.500}"}},contrast:{value:{_light:"{colors.primary.100}",_dark:"{colors.primary.900}"}},focusRing:{value:{_light:"{colors.primary.500}",_dark:"{colors.primary.600}"}}},secondary:{solid:{value:{_light:"{colors.secondary.500}",_dark:"{colors.secondary.500}"}},contrast:{value:{_light:"{colors.secondary.100}",_dark:"{colors.secondary.900}"}},focusRing:{value:{_light:"{colors.secondary.500}",_dark:"{colors.secondary.600}"}}}}}}}),_r=Et(Ot,Tr);function Ir(t){return e.jsx(zt,{value:_r,children:e.jsx(Sr,{...t})})}br.use(yr).use(vr).init({lng:"zh",fallbackLng:"en",ns:["common","motorPage","carPage","aboutPage","projectPage"],defaultNS:"common",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},interpolation:{escapeValue:!1}});const Cr=({visitorStats:t})=>e.jsx(p,{as:"footer",w:"full",bg:Ys("gray.100","gray.900"),children:e.jsxs(P,{py:2,px:6,alignItems:"center",children:[e.jsx(P,{gap:4}),e.jsx(ls,{}),e.jsx(ye,{size:"lg",color:"red",bg:"red"}),e.jsx(D,{color:"black",children:t?t.data[0].activeUsers:""}),e.jsx(ls,{}),e.jsxs(P,{gap:3,alignItems:"center",children:[e.jsx(ve,{href:"https://github.com/xiuger0x0",target:"_blank",focusRing:"none",children:e.jsx(G,{variant:"ghost",rounded:"full",children:e.jsx(xt,{})})}),e.jsx(ye,{orientation:"vertical",height:"4"}),e.jsx(ve,{href:"https://www.youtube.com/@xiuger0x0",target:"_blank",focusRing:"none",children:e.jsx(G,{variant:"ghost",rounded:"full",children:e.jsx(jt,{})})})]})]})});Js({key:"countState",default:0});const Oe=Js({key:"userState",default:null}),Dr=[{name:"page_title_airsoft",path:"/airsoft",children:[{name:"page_title_airsoft_dashboard",path:"/airsoft/dashboard"},{name:"page_title_airsoft_equipment",path:"/airsoft/equipment"}]},{name:"page_title_telecommunication",path:"/telecommunication",children:[{name:"page_title_telecommunication_dashboard",path:"/telecommunication/dashboard"}]},{name:"page_title_item",path:"/item",children:[{name:"page_title_motor",path:"/item/motorcycle"},{name:"page_title_car",path:"/item/car"}]},{name:"page_title_about",path:"/about"},{name:"元件遊樂場",path:"/playground",isDev:!0}],js=({direction:t="row",onLinkClick:r})=>{const{t:i}=E("common"),o=Ne(),n=ys(),c=!0,h=Dr.filter(x=>c),m=x=>x.split("/")[1];return e.jsx(Ss,{as:"nav",align:"center",flexDirection:t,children:h.map(x=>x.children?e.jsxs(ws,{children:[e.jsx(Ts,{children:e.jsx(p,{p:2,cursor:"pointer",borderBottom:"2px solid",borderBottomColor:m(n.pathname)===m(x.path)?"primary":"transparent",color:m(n.pathname)===m(x.path)?"primary":"inherit",_hover:{borderBottomColor:"primary",color:"primary"},children:i(x.name)})}),e.jsx(_s,{children:e.jsx(Is,{children:e.jsx(Se,{children:x.children.map(S=>e.jsx(we,{value:S.path,onClick:()=>{o(S.path),r==null||r()},children:i(S.name)},S.path))})})})]},x.name):e.jsx(p,{onClick:()=>{o(x.path),r==null||r()},p:2,cursor:"pointer",borderBottom:"2px solid",borderBottomColor:m(n.pathname)===m(x.path)?"primary":"transparent",color:m(n.pathname)===m(x.path)?"primary":"inherit",_hover:{borderBottomColor:"primary",color:"primary"},children:i(x.name)},x.path))})},ms=({toggleLanguage:t})=>e.jsx(G,{variant:"ghost",rounded:"full",onClick:t,children:e.jsx(pt,{})}),Fr=({user:t,handleLogout:r})=>e.jsx(Q,{gap:"4",children:e.jsxs(ws,{children:[e.jsx(Ts,{children:e.jsxs(Gt,{children:[e.jsx(Jt,{name:t.displayName??""}),e.jsx(Xt,{src:t.pictureUrl??""})]})}),e.jsx(_s,{children:e.jsxs(Is,{children:[e.jsx(Se,{children:e.jsx(we,{value:"displayName",children:e.jsxs(D,{fontWeight:"medium",children:[hs("nickname"),"：",t.displayName]})})}),e.jsx(Yt,{}),e.jsx(Se,{children:e.jsx(we,{value:"logout",onClick:r,color:"fg.error",_hover:{bg:"bg.error",color:"fg.error"},children:hs("logout")})})]})})]})},t.displayName);function Lr(){const[t,r]=pr(Oe),[i,o]=d.useState(!1),[n,c]=d.useState(!1),h=d.useRef(0),{t:m,i18n:x}=E();d.useEffect(()=>{const g=()=>{const _=window.scrollY;_>100&&_>h.current?c(!0):c(!1),h.current=_};return window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)}},[]),d.useEffect(()=>{const g=localStorage.getItem("user");g&&r(JSON.parse(g))},[r]);const S=Ne(),R=()=>{S("/login")},A=()=>{r({userId:null,displayName:null,pictureUrl:null,userEmail:null}),localStorage.removeItem("token"),localStorage.removeItem("user"),S("/")},k=()=>{const g=x.language==="zh"?"en":"zh";x.changeLanguage(g)};return e.jsxs(p,{position:"fixed",top:n?"-80px":"0",left:"0",width:"100%",bg:Ys("gray.100","gray.900"),transition:"top 0.3s ease",zIndex:"max",shadow:"xs",children:[e.jsxs(P,{h:14,alignItems:"center",justifyContent:"space-between",mx:4,children:[e.jsx(G,{onClick:()=>o(!i),display:{md:"none"},variant:"ghost",children:i?e.jsx(mt,{}):e.jsx(ut,{})}),e.jsxs(Q,{children:[e.jsx(bs,{to:"/",children:e.jsx(p,{p:5,children:e.jsx(D,{fontWeight:"bold",children:"Logo"})})}),e.jsx(Q,{as:"nav",display:{base:"none",md:"flex"},children:e.jsx(js,{direction:"row"})})]}),e.jsxs(P,{gap:2,children:[e.jsxs(p,{display:{base:"none",md:"flex"},children:[e.jsx(xs,{rounded:"full"}),e.jsx(ms,{toggleLanguage:k})]}),t!=null&&t.userEmail?e.jsx(Fr,{user:t,handleLogout:A}):e.jsx(C,{color:"green",variant:"surface",onClick:R,children:m("login")})]})]}),e.jsxs(Ut,{open:i,onOpenChange:g=>o(g.open),placement:"top",lazyMount:!0,unmountOnExit:!1,children:[e.jsx($t,{}),e.jsx(qt,{children:e.jsx(Vt,{children:e.jsxs(Ht,{children:[e.jsx(js,{direction:"column",onLinkClick:()=>o(!1)}),e.jsxs(Wt,{justifyContent:"space-between",children:[e.jsx(xs,{rounded:"full"}),e.jsx(ms,{toggleLanguage:k})]})]})})})]})]})}const V=gt({placement:"bottom-end",pauseOnPageIdle:!0}),Rr=()=>e.jsx(ee,{children:e.jsx(Kt,{toaster:V,insetInline:{mdDown:"4"},children:t=>{var r;return e.jsxs(Qt,{width:{md:"sm"},children:[t.type==="loading"?e.jsx(Ee,{size:"sm",color:"blue.solid"}):e.jsx(Zt,{}),e.jsxs(Ss,{gap:"1",flex:"1",maxWidth:"100%",children:[t.title&&e.jsx(er,{children:t.title}),t.description&&e.jsx(sr,{children:t.description})]}),t.action&&e.jsx(tr,{children:t.action.label}),((r=t.meta)==null?void 0:r.closable)&&e.jsx(rr,{})]})}})}),Ar=()=>{const[t,r]=d.useState(null);return d.useEffect(()=>{r({data:[{country:"",activeUsers:"2"},{country:"Taiwan",activeUsers:"2"}]})},[]),e.jsxs(P,{direction:"column",minH:"100vh",children:[e.jsx(Rr,{}),e.jsx(Lr,{}),e.jsx(p,{w:{base:"full",md:"80vw"},mx:"auto",flex:"1",px:{base:2,md:0},mt:14,py:2,children:e.jsx(d.Suspense,{children:e.jsx(se,{})})}),e.jsx(Cr,{visitorStats:t})]})},f=ne.create({baseURL:"/api"});f.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Pr="Channel ID",kr="Channel secret",Nr="Callback URL",Mr=()=>{const t=Ne(),r=d.useCallback(async()=>{const o=new URLSearchParams(window.location.search).get("code");if(!o){console.error("❌ No authorization code found!");return}try{const n={grant_type:"authorization_code",code:o,redirect_uri:Nr,client_id:Pr,client_secret:kr},{data:c}=await ne.post("https://api.line.me/oauth2/v2.1/token",new URLSearchParams(n).toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});await f.post("/line/login",{idToken:c.id_token});const{data:h}=await ne.get("https://api.line.me/v2/profile",{headers:{Authorization:`Bearer ${c.access_token}`}}),m={lineId:h.userId,displayName:h.displayName,pictureUrl:h.pictureUrl,email:h.email??null};localStorage.setItem("user",JSON.stringify(m)),await f.post("/line/login",m),console.log("✅ LINE User successfully logged in!"),t("/")}catch(n){console.error("❌ LINE 登入失敗:",n)}},[t]);return d.useEffect(()=>{r()},[r]),e.jsx("div",{children:"登入中..."})},Er=d.forwardRef(function(r,i){const{showArrow:o,children:n,disabled:c,portalled:h=!0,content:m,contentProps:x,portalRef:S,...R}=r;return c?n:e.jsxs(nr,{...R,children:[e.jsx(ar,{asChild:!0,children:n}),e.jsx(ee,{disabled:!h,container:S,children:e.jsx(lr,{children:e.jsxs(ir,{ref:i,...x,children:[o&&e.jsx(or,{children:e.jsx(cr,{})}),m]})})})]})}),Y={bg:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"5px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},me=d.forwardRef(function(r,i){return e.jsxs(Cs,{ref:i,children:[e.jsx(dr,{}),e.jsx(hr,{...r})]})}),Br=Ds,ue=Ls,pe=Fs,ge=Rs,fe=As,Or=()=>{const t="Xiuger",{t:r}=E("common"),{t:i}=E("aboutPage");return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[t," | ",r("page_title_about")]})}),e.jsx(P,{gap:4,flexDirection:"column",children:e.jsx(Er,{content:i("tooltip.topImg"),children:e.jsx(Q,{...Y,bgImage:"url('/images/about_fp.jpg')",bgSize:"cover",bgPos:"center",bgRepeat:"no-repeat",minH:"80vh",alignItems:"flex-end",shadow:"md",children:e.jsx(p,{...Y,p:4,m:4,mt:"250px",w:{base:"100%",md:"auto"},rounded:"md",children:e.jsxs(p,{children:[e.jsxs(Br,{maxW:"600px",children:[e.jsxs(pe,{children:[e.jsx(me,{children:e.jsx(ft,{})}),e.jsxs(ue,{children:[e.jsx(ge,{textStyle:"sm",children:e.jsx(je,{whiteSpace:"normal",wordBreak:"break-word",maxW:"full",children:i("timeline.military")})}),e.jsx(fe,{children:"April 2017 - April 2021"})]})]}),e.jsxs(pe,{children:[e.jsx(me,{children:e.jsx(bt,{})}),e.jsxs(ue,{children:[e.jsx(ge,{textStyle:"sm",children:e.jsx(je,{whiteSpace:"normal",wordBreak:"break-word",maxW:"full",children:i("timeline.training")})}),e.jsx(fe,{children:"June 2022 ~ October 2022"}),e.jsx(D,{fontSize:"xs",children:i("timeline.trainingDetail")})]})]}),e.jsxs(pe,{children:[e.jsx(me,{children:e.jsx(yt,{})}),e.jsxs(ue,{children:[e.jsx(ge,{textStyle:"sm",children:e.jsx(je,{whiteSpace:"normal",wordBreak:"break-word",maxW:"full",children:i("timeline.university")})}),e.jsxs(fe,{children:["June 2023 ~ ",i("timeline.now")]})]})]})]}),e.jsxs(xr,{children:[e.jsx(jr,{children:e.jsxs("cite",{children:[" ",i("philosophy")]})}),e.jsx(mr,{})]})]})})})})})]})},zr=()=>{const t="Xiuger",{t:r}=E();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[t," | ",r("page_title_home")]})}),e.jsx(p,{children:e.jsx(Z,{align:"stretch",children:e.jsx(fr,{id:"comments",repo:"xiuger0x0/giscus",repoId:"R_kgDOOWgpEA",category:"General",categoryId:"DIC_kwDOOWgpEM4Co7CA",reactionsEnabled:"0",mapping:"specific",strict:"1",term:"VPS留言板",emitMetadata:"1",theme:"noborder_dark",lang:"zh-TW",loading:"lazy"})})})]})},Ur="2006347958-x0PM2Vp1",$r=()=>{const t="Xiuger",[r,i]=d.useState(null),[o,n]=d.useState(!1),[c,h]=d.useState(!0);d.useEffect(()=>{alert("📢 開始初始化 LIFF..."),X.init({liffId:Ur}).then(()=>{alert("✅ LIFF 初始化成功！"),n(X.isInClient()),X.isLoggedIn()?(alert("🔵 已登入，獲取用戶資料..."),m()):(alert("🔴 未登入，將進行登入..."),X.login())}).catch(x=>alert("❌ LIFF 初始化失敗："+x.message))},[]);const m=async()=>{try{alert("📢 等待 LIFF SDK 就緒..."),await X.ready,alert("✅ LIFF SDK 已就緒，開始獲取用戶資料...");const x=await X.getProfile();alert(`🎉 取得用戶資料成功！
👤 名稱：${x.displayName}`),i({displayName:x.displayName,pictureUrl:x.pictureUrl||"",userId:x.userId,userEmail:""})}catch(x){alert("❌ 取得用戶資料失敗："+x)}finally{h(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[t," | LIFF"]})}),e.jsx(p,{textAlign:"center",mt:"20px",children:o?c?e.jsx(Ee,{size:"xl"}):r?e.jsxs(e.Fragment,{children:[e.jsxs(ae,{as:"h2",children:["你好, ",r.displayName," 👋"]}),e.jsx(Ps,{src:r.pictureUrl||"",alt:"User Avatar",boxSize:"100px",borderRadius:"full",mt:"10px"})]}):e.jsx(D,{children:"無法獲取用戶資料"}):e.jsx(D,{children:"請使用 LINE 開啟此頁面"})})]})},qr=()=>{const t="Xiuger",{t:r}=E();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[t," | ",r("page_title_service")]})}),e.jsxs(p,{children:[e.jsx("h1",{children:"Service Page"}),e.jsx("p",{children:"Welcome to the Service Page. Here you can find information about our services."})]})]})},Vr=[{name:"motorcycle",icon:vt},{name:"car",icon:St}],Hr=()=>{const t="Xiuger",{t:r}=E(),i=ys();return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[t," | ",r("page_title_item")]})}),e.jsxs(P,{children:[e.jsx(ks,{defaultValue:"a",variant:"subtle",orientation:"vertical",position:"fixed",left:4,top:"50%",transform:"translateY(-50%)",zIndex:"max",children:e.jsx(Ns,{p:"1",gap:1,borderColor:"gray",...Y,children:Vr.map((o,n)=>{const c=i.pathname.includes(o.name);return e.jsx(B,{value:o.name[0],asChild:!0,_hover:{bg:"primary",color:"white"},color:c?"white":"inherit",bg:c?"primary":"",children:e.jsx(bs,{to:o.name,children:e.jsx(o.icon,{})})},n)})})}),e.jsx(p,{flex:1,children:e.jsx(d.Suspense,{children:e.jsx(se,{})})})]})]})},Wr=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:["Xiuger"," | 404"]})}),e.jsx(P,{w:"100vw",h:"100vh",alignItems:"center",justifyContent:"center",fontSize:"2xl",fontWeight:"bold",children:"404 Not Found | 這裡什麼都沒有"})]}),Gr={infinite:!1,speed:500,slidesToShow:2,slidesToScroll:1,dots:!1,arrows:!1,responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1}}]},Jr=[{id:"A_personalWebsite",image:"https://images.unsplash.com/photo-1516796181074-bf453fbfa3e6?auto=format&fit=crop&w=900&q=60",link:"#A"},{id:"B_travelAlbum",image:"https://images.unsplash.com/photo-1438183972690-6d4658e3290e?auto=format&fit=crop&w=2274&q=80",link:"#B"},{id:"C_travelAlbum",image:"https://images.unsplash.com/photo-1438183972690-6d4658e3290e?auto=format&fit=crop&w=2274&q=80",link:"#B"},{id:"D_travelAlbum",image:"https://images.unsplash.com/photo-1438183972690-6d4658e3290e?auto=format&fit=crop&w=2274&q=80",link:"#B"}],Xr=(t,r,i,o)=>[{icon:e.jsx(Tt,{}),title:t(`projects.${r}.timeline.start.title`),description:t(`projects.${r}.timeline.start.description`),period:t(`projects.${r}.timeline.start.period`)},{icon:e.jsx(_t,{}),title:t(`projects.${r}.timeline.draft.title`),description:t(`projects.${r}.timeline.draft.description`),period:t(`projects.${r}.timeline.draft.period`)},{icon:e.jsx(It,{}),title:t(`projects.${r}.timeline.launch.title`),description:t(`projects.${r}.timeline.launch.description`),period:t(`projects.${r}.timeline.launch.period`),image:i,link:o}],Yr=()=>{const t="Xiuger",{t:r}=E("common"),{t:i}=E("projectPage");return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[t," | ",r("page_title_project")]})}),e.jsx(p,{maxW:"100vw",overflow:"hidden",children:e.jsx(wt,{...Gr,children:Jr.map(({id:o,image:n,link:c})=>e.jsx(p,{px:2,children:e.jsx(Ds,{minH:"80vh",maxW:"900px",mx:"auto",p:4,pr:6,...Y,children:Xr(i,o,n,c).map((h,m)=>e.jsxs(Fs,{children:[e.jsx(Cs,{children:h.icon}),e.jsxs(Ls,{children:[e.jsx(Rs,{textStyle:"sm",children:h.title}),e.jsxs(As,{children:[h.period&&e.jsx(D,{mb:1,fontSize:"sm",color:"gray.500",children:h.period}),e.jsx(D,{mb:2,children:h.description}),m===2&&h.image&&e.jsx(p,{mb:2,borderRadius:"md",overflow:"hidden",children:e.jsx(Ps,{src:h.image,alt:h.title,aspectRatio:4/2})}),m===2&&h.link&&e.jsx(ve,{href:h.link,color:"teal.500",target:"_blank",rel:"noopener noreferrer",fontWeight:"bold",children:i("viewProject")})]})]})]},m))})},o))})})]})};function Kr(){return e.jsx(p,{style:{width:"100vw",height:"100vh",overflow:"hidden"},children:e.jsx(se,{})})}const Qr=async t=>{const r=t?`/guns/by-member/${t}`:"/guns/getAll";return f.get(r)},Zr=t=>f.post("/guns",t),en=(t,r)=>f.put(`/guns/${t}`,r),sn=t=>f.delete(`/guns/${t}`),tn=()=>{const t=localStorage.getItem("user");if(!t)throw new Error("User not found in localStorage");console.log("User data from localStorage:",t);const r=JSON.parse(t),i=r==null?void 0:r.userId;if(!i)throw new Error("User ID missing");return f.get(`/guns/${i}`)},us=()=>{const[t,r]=d.useState([]),[i,o]=d.useState(!0),[n,c]=d.useState({}),[h,m]=d.useState(null),[x,S]=d.useState(""),[R,A]=d.useState(!1),k="Xiuger",{t:g}=E("common"),_=async()=>{try{const j=await tn();console.log("Fetched user:",j.data)}catch(j){console.error("Failed to fetch user",j)}},I=async()=>{o(!0);const j=await Qr(x);console.log("Fetched guns:",j.data),r(Array.isArray(j.data)?j.data:[j.data]),o(!1)};d.useEffect(()=>{_(),I()},[]);const N=async()=>{!n.model||!n.serialNumber||(h!==null?await en(h,n):await Zr(n),await I(),c({}),m(null),A(!1))},ie=async j=>{await sn(j),await I()};return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:e.jsxs("title",{children:[k," | ",g("page_title_airsoft")]})}),e.jsxs(p,{maxW:"6xl",mx:"auto",p:5,children:[e.jsx(ae,{mb:4,children:"氣槍管理"}),e.jsxs(P,{mb:4,gap:2,wrap:"wrap",align:"flex-end",children:[e.jsx(y,{placeholder:"查詢會員編號",value:x,onChange:j=>S(j.target.value)}),e.jsx(C,{onClick:I,variant:"outline",children:"查詢"}),e.jsxs(Ms,{open:R,onOpenChange:j=>A(j.open),children:[e.jsx(ur,{asChild:!0,children:e.jsx(C,{colorScheme:"blue",children:h!==null?"編輯槍枝":"新增槍枝"})}),e.jsxs(ee,{children:[e.jsx(Es,{}),e.jsx(Bs,{children:e.jsxs(Os,{children:[e.jsx(zs,{children:e.jsx(Us,{children:h?"編輯槍枝":"新增槍枝"})}),e.jsx($s,{children:e.jsxs(P,{direction:"column",gap:3,children:[e.jsx(y,{placeholder:"槍型",value:n.model??"",onChange:j=>c({...n,model:j.target.value})}),e.jsx(y,{placeholder:"序號",value:n.serialNumber??"",onChange:j=>c({...n,serialNumber:j.target.value})}),e.jsx(y,{placeholder:"動力類型 (AEG/Gas/CO2/Manual)",value:n.powerType??"",onChange:j=>c({...n,powerType:j.target.value})}),e.jsx(y,{type:"number",placeholder:"0.25g 彈速",value:n.velocity025??"",onChange:j=>c({...n,velocity025:parseFloat(j.target.value)})}),e.jsx(y,{type:"number",placeholder:"0.36g 彈速",value:n.velocity036??"",onChange:j=>c({...n,velocity036:parseFloat(j.target.value)})}),e.jsx(y,{type:"datetime-local",placeholder:"最後保養時間",value:n.lastMaintenanceAt?n.lastMaintenanceAt.slice(0,16):"",onChange:j=>c({...n,lastMaintenanceAt:j.target.value})})]})}),e.jsxs(qs,{children:[e.jsx(Vs,{asChild:!0,children:e.jsx(C,{variant:"outline",children:"取消"})}),e.jsx(C,{onClick:N,children:h?"更新":"新增"})]}),e.jsx(Hs,{asChild:!0,children:e.jsx(Ws,{size:"sm"})})]})})]})]})]}),i?e.jsx(Ee,{}):e.jsxs(O,{children:[e.jsx(z,{children:e.jsxs(T,{whiteSpace:"nowrap",children:[e.jsx(a,{children:"會員編號"}),e.jsx(a,{children:"槍型"}),e.jsx(a,{children:"序號"}),e.jsx(a,{children:"動力"}),e.jsx(a,{children:"0.25g"}),e.jsx(a,{children:"0.36g"}),e.jsx(a,{children:"上次保養"}),e.jsx(a,{children:"操作"})]})}),e.jsx(U,{children:t.map(j=>e.jsxs(T,{children:[e.jsx(l,{children:j.owner.id}),e.jsx(l,{children:j.model}),e.jsx(l,{children:j.serialNumber}),e.jsx(l,{children:j.powerType}),e.jsx(l,{children:e.jsx(is,{value:j.velocity025,style:"unit",unit:"meter-per-second",minimumFractionDigits:0,maximumFractionDigits:1})}),e.jsx(l,{children:e.jsx(is,{value:j.velocity036,style:"unit",unit:"meter-per-second",minimumFractionDigits:0,maximumFractionDigits:1})}),e.jsx(l,{children:j.lastMaintenanceAt?new Date(j.lastMaintenanceAt).toLocaleString():"—"}),e.jsxs(l,{children:[e.jsx(G,{"aria-label":"edit",onClick:()=>{c(j),m(j.id),A(!0)},mr:2,children:e.jsx(Ct,{})}),e.jsx(G,{"aria-label":"delete",onClick:()=>ie(j.id),colorScheme:"red",children:e.jsx(Dt,{})})]})]},j.id))})]})]})]})},rn={BASIC:"免費會員",PRO:"專業會員 - 1 NTD/月",VIP:"尊榮會員 - 10 NTD/月"},ps=be({items:Object.entries(rn).map(([t,r])=>({label:r,value:t}))}),nn=()=>{const{register:t,handleSubmit:r,control:i,formState:{errors:o},setValue:n,watch:c}=Me({defaultValues:{email:"",password:"",password2:"",displayName:"",phone:"",memberLevel:["BASIC"]}}),[h,m]=d.useState(null),[x,S]=d.useState(!1),R=Xs(Oe),A=c("password"),k=async g=>{var _;try{m(null),S(!1);const I=await f.post("/members/register",g);S(!0);const N={displayName:I.data.displayName,userEmail:I.data.email,token:I.data.token,userId:null,pictureUrl:null,is_admin:!1};localStorage.setItem("user",JSON.stringify(N)),localStorage.setItem("token",N.token),R(N),window.location.href="/"}catch(I){if(ne.isAxiosError(I)){const N=((_=I.response)==null?void 0:_.data)||I.message||"註冊失敗，請稍後再試";m(N)}else m("註冊失敗，請稍後再試")}};return e.jsxs(p,{maxW:"md",mx:"auto",my:10,p:6,...Y,children:[e.jsx(Gs,{pb:4,children:e.jsx(ae,{size:"2xl",children:"註冊"})}),e.jsx("form",{onSubmit:r(k),children:e.jsxs(Z,{align:"stretch",children:[e.jsxs(F,{required:!0,children:[e.jsxs(L,{children:["電子郵件 (帳號) ",e.jsx(H,{})]}),e.jsx(y,{type:"email",placeholder:"請輸入電子郵件",...t("email",{required:"請輸入電子郵件",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"電子郵件格式不正確"}})}),o.email&&e.jsx(re,{color:"red.500",children:o.email.message})]}),e.jsxs(F,{required:!0,children:[e.jsxs(L,{children:["密碼 ",e.jsx(H,{})]}),e.jsx(y,{type:"password",placeholder:"密碼",...t("password",{required:"請輸入密碼"})}),o.password&&e.jsx(re,{color:"red.500",children:o.password.message})]}),e.jsxs(F,{required:!0,children:[e.jsxs(L,{children:["再次輸入密碼 ",e.jsx(H,{})]}),e.jsx(y,{type:"password",placeholder:"請再次輸入密碼",...t("password2",{required:"請再次輸入密碼",validate:g=>g===A||"密碼輸入不一致"})}),o.password2&&e.jsx(re,{color:"red.500",children:o.password2.message})]}),e.jsxs(F,{required:!0,children:[e.jsxs(L,{children:["暱稱 ",e.jsx(H,{})]}),e.jsx(y,{placeholder:"暱稱",...t("displayName")})]}),e.jsxs(F,{children:[e.jsx(L,{children:"電話"}),e.jsx(y,{placeholder:"電話",...t("phone")})]}),e.jsxs(F,{required:!0,children:[e.jsxs(L,{children:["會員等級 ",e.jsx(H,{})]}),e.jsx(K,{name:"memberLevel",control:i,rules:{validate:g=>Array.isArray(g)&&g.length>0||"請選擇會員等級"},render:({field:g})=>e.jsxs(Te,{name:g.name,value:g.value,onValueChange:_=>n("memberLevel",_.value),onInteractOutside:()=>g.onBlur(),collection:ps,children:[e.jsx(_e,{}),e.jsxs(Ie,{children:[e.jsx(Ce,{children:e.jsx(De,{placeholder:"請選擇會員等級"})}),e.jsx(Fe,{children:e.jsx(Le,{})})]}),e.jsx(ee,{children:e.jsx(Re,{children:e.jsx(Ae,{children:ps.items.map(_=>e.jsxs(Pe,{item:_,children:[_.label,e.jsx(ke,{})]},_.value))})})})]})}),o.memberLevel&&e.jsx(re,{color:"red.500",children:o.memberLevel.message})]}),h&&e.jsxs(os,{status:"error",children:[e.jsx(cs,{}),e.jsx(ds,{children:h})]}),x&&e.jsxs(os,{status:"success",children:[e.jsx(cs,{}),e.jsx(ds,{children:"註冊成功！"})]}),e.jsx(C,{colorScheme:"teal",type:"submit",children:"送出"})]})})]})},an=({onLogin:t,onLineLogin:r,onRegister:i})=>{const{control:o,handleSubmit:n,formState:{errors:c,isSubmitting:h}}=Me(),m=x=>{t(x)};return e.jsxs(p,{maxW:"md",mx:"auto",my:10,p:6,rounded:"xl",...Y,children:[e.jsx(Gs,{pb:4,children:e.jsx(ae,{size:"2xl",children:"登入"})}),e.jsx("form",{onSubmit:n(m),children:e.jsxs(Z,{align:"stretch",children:[e.jsx(K,{name:"email",control:o,rules:{required:"請輸入帳號"},render:({field:x})=>e.jsxs(F,{invalid:!!c.email,required:!0,children:[e.jsxs(L,{children:["帳號 ",e.jsx(H,{})]}),e.jsx(y,{...x}),c.email&&e.jsx(W,{children:c.email.message})]})}),e.jsx(K,{name:"password",control:o,rules:{required:"請輸入密碼"},render:({field:x})=>e.jsxs(F,{invalid:!!c.password,required:!0,children:[e.jsxs(L,{children:["密碼",e.jsx(H,{})]}),e.jsx(y,{...x,type:"password"}),c.password&&e.jsx(W,{children:c.password.message})]})}),e.jsx(C,{colorScheme:"teal",type:"submit",disabled:h,width:"100%",children:"登入"})]})}),e.jsx(ye,{my:6}),e.jsxs(Z,{align:"center",children:[e.jsx(D,{color:"gray.500",fontSize:"sm",children:"或使用其他方式登入"}),e.jsx(C,{onClick:r,bg:"#06C755",color:"white",_hover:{bg:"#05B34F"},width:"100%",children:"使用 LINE 登入"}),e.jsx(C,{onClick:i,colorScheme:"teal",fontSize:"sm",width:"100%",children:"還沒有帳號嗎？前往註冊"})]})]})},ln=()=>e.jsx(p,{children:e.jsx(se,{})}),on=()=>e.jsx(p,{children:e.jsx(se,{})}),gs=()=>{var Ze,es,ss,ts,rs;const[t,r]=d.useState("user"),[i,o]=d.useState(""),[n,c]=d.useState([]),[h,m]=d.useState([]),[x,S]=d.useState([]),[R,A]=d.useState([]),[k,g]=d.useState([]),[_,I]=d.useState([]),[N,ie]=d.useState([]),[j,te]=d.useState(!1),ze=new Date().getFullYear(),Ue=new Date().getMonth()+1,[$e,Ks]=d.useState(ze),[qe,Qs]=d.useState(Ue),[v,Ve]=d.useState(null),[He,We]=d.useState(null),Ge=()=>{c([]),m([]),S([]),A([]),g([]),I([]),Ve(null),We(null)},oe=async(s,u=ze,w=Ue)=>{try{const J=await f.get("/telecom/bills",{params:{phone:s,year:u,month:w}});I(J.data)}catch{V.create({title:"查詢帳單失敗",description:"請確認查詢條件或稍後再試。",type:"error"}),I([])}},Zs=async()=>{try{const u=(await f.post("/telecom/generate-bills")).data.map(w=>({userId:w.user.id,phoneNumber:w.user.phoneNumber,userName:w.user.name,planName:w.user.currentPlan.name,baseFee:w.baseFee,callFee:w.callFee,smsFee:w.smsFee,dataFee:w.dataFee,discount:w.discountTotal,totalAmount:w.totalAmount,issuedAt:w.issuedAt,paidAt:w.paidAt??null}));I(u),V.create({title:"模擬成功",description:"帳單已產生。",type:"success"})}catch{V.create({title:"模擬失敗",description:"無法產生帳單，請稍後再試。",type:"error"})}},et=async()=>{try{const s=await f.get("/telecom/users/usage-summary",{params:{phone:i}});Ve(s.data),We(s.data.mostContacted||null)}catch(s){console.error("取得使用摘要失敗",s)}},st=async()=>{const s=await f.get("/telecom/plans");return ie(s.data),s.data},Je=async()=>{Ge();try{const[s,u,w,J,he]=await Promise.all([f.get("/telecom/users"),f.get("/telecom/calls"),f.get("/telecom/sms"),f.get("/telecom/data-usage"),f.get("/telecom/data-usage/top10"),oe()]);c(s.data),m(u.data),S(w.data),A(J.data),g(he.data)}catch{V.create({title:"查詢失敗",description:"無法查詢用戶與使用紀錄，請稍後再試。",type:"error"})}},Xe=async s=>{if(!s){Je();return}Ge();try{const[u,w,J,he]=await Promise.all([f.get("/telecom/calls",{params:{phone:s}}),f.get("/telecom/users",{params:{phone:s}}),f.get("/telecom/sms",{params:{phone:s}}),f.get("/telecom/data-usage",{params:{phone:s}}),oe(s)]);c(w.data),m(u.data),S(J.data),A(he.data),et()}catch{V.create({title:"查詢失敗",description:"無法查詢用戶資訊與紀錄，請稍後再試。",type:"error"})}};d.useEffect(()=>{Xe(),st()},[]);const Ye=be({items:[{label:"月租",value:"POSTPAID"},{label:"預付",value:"PREPAID"}]}),Ke=N.map(s=>({id:s.id,value:s.id.toString(),label:`${s.name} ${s.monthlyFee}元/月`,name:s.name,monthlyFee:s.monthlyFee})),tt=be({items:Ke}),rt=Ft({name:xe().min(1,{message:"請輸入姓名"}).max(20,{message:"姓名不能超過 20 字元"}),number:xe().length(8,{message:"門號長度必須為 8 位數"}),subscriberType:ns(as(["POSTPAID","PREPAID"],{required_error:"請選擇訂閱者類型",invalid_type_error:"無效的訂閱者類型"})).min(1,{message:"請至少選擇一種訂閱者類型"}).max(1,{message:"最多只能選擇一種訂閱者類型"}),planId:ns(as(["1","2","3"],{invalid_type_error:"無效的方案 ID"})).optional(),ssn:xe().length(10,{message:"SSN 必須為 10 位數"})}).refine(s=>!s.subscriberType.includes("POSTPAID")||s.planId&&s.planId.length>0,{path:["planId"],message:"月租型用戶請選擇方案"}),{handleSubmit:nt,control:Qe,register:ce,formState:{errors:M},watch:at,reset:de}=Me({resolver:Lt(rt)}),lt=(at("subscriberType")??[]).includes("POSTPAID"),it=async s=>{try{await f.post("/telecom/register",{name:s.name,number:s.number,planId:s.planId,subscriberType:s.subscriberType,ssn:s.ssn}).then(()=>{de(),te(!1)}),V.create({title:"註冊成功",description:"用戶已成功註冊。",type:"success",duration:3e3}),Je()}catch{alert("註冊失敗")}};return e.jsxs(p,{p:6,children:[e.jsxs(ks,{value:t,onValueChange:s=>r(s.value),children:[e.jsxs(Ns,{children:[e.jsx(B,{value:"plan",children:"方案一覽"}),e.jsx(B,{value:"user",children:"用戶列表"}),e.jsx(B,{value:"info",children:"用戶細節"}),e.jsx(B,{value:"usage_call",children:"通話紀錄 (30日)"}),e.jsx(B,{value:"usage_data",children:"流量紀錄 (30日)"}),!i&&e.jsx(B,{value:"usage_data_top10",children:"流量排行前十"}),e.jsx(B,{value:"usage_sms",children:"簡訊紀錄"}),e.jsx(B,{value:"invoice",children:"帳單紀錄"})]}),e.jsxs(Q,{my:4,children:[e.jsx(y,{placeholder:"輸入門號",value:i,onChange:s=>o(s.target.value)}),e.jsx(C,{onClick:()=>Xe(i),children:"查詢"}),e.jsx(C,{colorScheme:"blue",onClick:()=>te(!0),children:"➕ 新增用戶"})]}),e.jsx($,{value:"user",children:n.length>0&&e.jsxs(O,{mt:6,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"用戶 ID"}),e.jsx(a,{children:"姓名"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"方案"}),e.jsx(a,{children:"申辦時間"}),e.jsx(a,{children:"SSN"}),e.jsx(a,{children:"地址"}),e.jsx(a,{children:"城市"}),e.jsx(a,{children:"國家"}),e.jsx(a,{children:"郵遞區號"})]})}),e.jsx(U,{children:n.map(s=>e.jsxs(T,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:s.name}),e.jsx(l,{children:s.number}),e.jsx(l,{children:s.planName}),e.jsx(l,{children:s.createdAt}),e.jsx(l,{children:s.ssn||"限管理者檢視"}),e.jsx(l,{children:s.address||"無資料"}),e.jsx(l,{children:s.city||"無資料"}),e.jsx(l,{children:s.country||"無資料"}),e.jsx(l,{children:s.postalCode||"無資料"})]},s.id))})]})}),e.jsx($,{value:"plan",children:e.jsx(p,{mt:4,children:e.jsxs(O,{size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"方案 ID"}),e.jsx(a,{children:"方案名稱"}),e.jsx(a,{children:"月租費用"}),e.jsx(a,{children:"免費簡訊數"}),e.jsx(a,{children:"包含流量 (MB)"}),e.jsx(a,{children:"計費類型"}),e.jsx(a,{children:"資料政策"}),e.jsx(a,{children:"超出費用政策"}),e.jsx(a,{children:"限速政策"}),e.jsx(a,{children:"生效日期"})]})}),e.jsx(U,{children:N.map(s=>e.jsxs(T,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:s.name}),e.jsxs(l,{children:["$",s.monthlyFee]}),e.jsx(l,{children:s.includedSms}),e.jsx(l,{children:s.includedDataMb!=99999?`${s.includedDataMb} MB`:"不限"}),e.jsx(l,{children:s.billingType==="POSTPAID"?"月租":"預付"}),e.jsx(l,{children:s.dataPolicy}),e.jsx(l,{children:s.overagePolicy==="THROTTLE"?`限速 ${s.throttleSpeedKbps} Kbps`:"無額外費用"}),e.jsx(l,{children:s.throttleAfterMb?`${s.throttleAfterMb} MB 後限速 `:"無限速限制"}),e.jsx(l,{children:s.effectiveFrom?new Date(s.effectiveFrom).toLocaleDateString():"無生效日期"})]},s.id))})]})})}),e.jsxs($,{value:"usage_call",children:[h.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"發送人 (ID)"}),e.jsx(a,{children:"時間"}),e.jsx(a,{children:"對象"}),e.jsx(a,{children:"時長 (分鐘)"})]})}),e.jsx(U,{children:h.map((s,u)=>e.jsxs(T,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:s.timestamp}),e.jsx(l,{children:s.receiver}),e.jsx(l,{children:s.durationMinutes})]},u))})]}):e.jsx(p,{mt:4,children:"尚無通話紀錄"}),e.jsxs(D,{m:2,children:["總筆數：",h.length]})]}),e.jsxs($,{value:"usage_sms",children:[x.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"發送人 (ID)"}),e.jsx(a,{children:"發送時間"}),e.jsx(a,{children:"對象"}),e.jsx(a,{children:"狀態"})]})}),e.jsx(U,{children:x.map((s,u)=>e.jsxs(T,{children:[e.jsx(l,{children:s.userId}),e.jsx(l,{children:s.sentAt}),e.jsx(l,{children:s.recipient}),e.jsx(l,{children:s.status})]},u))})]}):e.jsx(p,{mt:4,children:"尚無簡訊紀錄"}),e.jsxs(D,{m:2,children:["總筆數：",x.length]})]}),e.jsxs($,{value:"usage_data",children:[R.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"用戶ID"}),e.jsx(a,{children:"用戶名稱"}),e.jsx(a,{children:"上傳 (MB)"}),e.jsx(a,{children:"下載 (MB)"}),e.jsx(a,{children:"總流量 (MB)"})]})}),e.jsx(U,{children:R.map((s,u)=>e.jsxs(T,{children:[e.jsx(l,{children:s.userId}),e.jsx(l,{children:s.userName}),e.jsx(l,{children:s.uploadMb}),e.jsx(l,{children:s.downloadMb}),e.jsx(l,{children:s.totalMb})]},u))})]}):e.jsx(p,{mt:4,children:"尚無流量紀錄"}),e.jsxs(D,{m:2,children:["總筆數：",R.length]})]}),!i&&e.jsxs($,{value:"usage_data_top10",children:[k.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"用戶ID"}),e.jsx(a,{children:"用戶名稱"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"總流量 (MB)"})]})}),e.jsx(U,{children:k.map((s,u)=>e.jsxs(T,{children:[e.jsx(l,{children:s.userId}),e.jsx(l,{children:s.userName}),e.jsx(l,{children:s.phoneNumber}),e.jsx(l,{children:s.totalUsageMb.toFixed(2)})]},u))})]}):e.jsx(p,{mt:4,children:"尚無流量排行前十紀錄"}),e.jsxs(D,{m:2,children:["總筆數：",k.length]})]}),e.jsx($,{value:"info",children:e.jsxs(p,{mt:5,children:[He&&e.jsxs(D,{mb:2,children:["最常聯絡對象: ",He||"無資料"]}),(v&&e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"使用者"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"方案名稱"}),e.jsx(a,{children:"通話次數"}),e.jsx(a,{children:"簡訊次數"}),e.jsx(a,{children:"總上網用量(MB)"})]})}),e.jsx(U,{children:e.jsxs(T,{children:[e.jsx(l,{children:v==null?void 0:v.user.name}),e.jsx(l,{children:v==null?void 0:v.user.phoneNumber}),e.jsx(l,{children:v==null?void 0:v.user.currentPlan.name}),e.jsx(l,{children:v==null?void 0:v.callCount}),e.jsx(l,{children:v==null?void 0:v.smsCount}),e.jsxs(l,{children:[v==null?void 0:v.totalDataUsageMb.toFixed(2)," MB"]})]})})]}))??e.jsx(p,{mt:4,children:"尚未查詢用戶使用明細"})]})}),e.jsxs($,{value:"invoice",children:[e.jsxs(p,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(y,{type:"number",placeholder:"年份",value:$e,onChange:s=>Ks(Number(s.target.value))}),e.jsx(y,{type:"number",placeholder:"月份",value:qe,onChange:s=>Qs(Number(s.target.value))}),e.jsx(C,{onClick:()=>oe(i,$e,qe),children:"查詢"}),e.jsx(C,{variant:"surface",color:"orange",onClick:Zs,children:"模擬帳單(所有用戶)"})]}),_.length>0?e.jsxs(O,{mt:4,size:"sm",children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(a,{children:"姓名"}),e.jsx(a,{children:"門號"}),e.jsx(a,{children:"方案"}),e.jsx(a,{children:"基本費"}),e.jsx(a,{children:"通話費"}),e.jsx(a,{children:"簡訊費"}),e.jsx(a,{children:"上網費"}),e.jsx(a,{children:"折扣"}),e.jsx(a,{children:"總金額"}),e.jsx(a,{children:"帳單日"}),e.jsx(a,{children:"繳款時間"})]})}),e.jsx(U,{children:_.map((s,u)=>e.jsxs(T,{children:[e.jsx(l,{children:s.userName}),e.jsx(l,{children:s.phoneNumber}),e.jsx(l,{children:s.planName}),e.jsxs(l,{children:["$",s.baseFee.toFixed(2)]}),e.jsxs(l,{children:["$",s.callFee.toFixed(2)]}),e.jsxs(l,{children:["$",s.smsFee.toFixed(2)]}),e.jsxs(l,{children:["$",s.dataFee.toFixed(2)]}),e.jsxs(l,{children:["-$",s.discount.toFixed(2)]}),e.jsx(l,{children:e.jsxs("strong",{children:["$",s.totalAmount.toFixed(2)]})}),e.jsx(l,{children:new Date(s.issuedAt).toLocaleString()}),e.jsx(l,{children:s.planName!=="預付卡方案"?s.paidAt?new Date(s.paidAt).toLocaleString():"尚未繳款":"無繳款資訊"})]},u))})]}):e.jsx(p,{mt:4,children:"尚無帳單紀錄 (未產生)"})]})]}),j&&e.jsx(Ms,{open:j,children:e.jsxs(ee,{children:[e.jsx(Es,{}),e.jsx(Bs,{children:e.jsxs(Os,{children:[e.jsx(zs,{children:e.jsx(Us,{children:"新增用戶"})}),e.jsx($s,{children:e.jsx("form",{children:e.jsxs(Z,{children:[e.jsxs(F,{invalid:!!M.name,children:[e.jsx(L,{children:"姓名"}),e.jsx(y,{placeholder:"輸入姓名",...ce("name")}),e.jsx(W,{children:(Ze=M.name)==null?void 0:Ze.message})]}),e.jsxs(F,{invalid:!!M.ssn,children:[e.jsx(L,{children:"SSN"}),e.jsx(y,{placeholder:"輸入 SSN",...ce("ssn"),maxLength:10}),e.jsx(W,{children:(es=M.ssn)==null?void 0:es.message})]}),e.jsxs(F,{invalid:!!M.number,children:[e.jsx(L,{children:"門號"}),e.jsx(y,{placeholder:"輸入門號",...ce("number"),maxLength:8}),e.jsx(W,{children:(ss=M.number)==null?void 0:ss.message})]}),e.jsxs(F,{invalid:!!M.subscriberType,children:[e.jsx(L,{children:"訂閱者類型"}),e.jsx(K,{control:Qe,name:"subscriberType",render:({field:s})=>e.jsxs(Te,{onValueChange:({value:u})=>{s.onChange(u)},onInteractOutside:()=>s.onBlur(),collection:Ye,children:[e.jsx(_e,{name:s.name}),e.jsxs(Ie,{children:[e.jsx(Ce,{children:e.jsx(De,{placeholder:"選擇訂閱者類型"})}),e.jsx(Fe,{children:e.jsx(Le,{})})]}),e.jsx(Re,{children:e.jsx(Ae,{children:Ye.items.map(u=>e.jsxs(Pe,{item:u,children:[u.label,e.jsx(ke,{})]},u.value))})})]})}),e.jsx(W,{children:(ts=M.subscriberType)==null?void 0:ts.message})]}),lt&&e.jsxs(F,{invalid:!!M.planId,children:[e.jsx(L,{children:"選擇方案"}),e.jsx(K,{control:Qe,name:"planId",render:({field:s})=>e.jsxs(Te,{onValueChange:({value:u})=>{s.onChange(u)},onInteractOutside:()=>s.onBlur(),collection:tt,children:[e.jsx(_e,{name:s.name}),e.jsxs(Ie,{children:[e.jsx(Ce,{children:e.jsx(De,{placeholder:"請選擇方案"})}),e.jsx(Fe,{children:e.jsx(Le,{})})]}),e.jsx(Re,{children:e.jsx(Ae,{children:Ke.map(u=>e.jsxs(Pe,{item:u,children:[u.name," ",u.monthlyFee,"元/月",e.jsx(ke,{})]},u.id))})})]})}),e.jsx(W,{children:(rs=M.planId)==null?void 0:rs.message})]})]})})}),e.jsxs(qs,{children:[e.jsx(Vs,{asChild:!0,children:e.jsx(C,{variant:"outline",onClick:()=>{de(),te(!1)},children:"取消"})}),e.jsx(C,{onClick:nt(it),children:"儲存"})]}),e.jsx(Hs,{asChild:!0,onClick:()=>{de(),te(!1)},children:e.jsx(Ws,{size:"sm"})})]})})]})})]})},fs=d.lazy(()=>le(()=>import("./MotorPage-CCfxUzxs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),cn=d.lazy(()=>le(()=>import("./CarPage-DxGIB8Qr.js"),__vite__mapDeps([8,1,4,5,2,3,6,7]))),dn=d.lazy(()=>le(()=>import("./WeaponCustomizer-yCWkFBHz.js"),__vite__mapDeps([9,1,10,11,3]))),hn=d.lazy(()=>le(()=>import("./OIIA-DBFG_rUA.js"),__vite__mapDeps([12,1,10,3]))),xn="Channel ID",jn="Callback URL",mn=`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${xn}&redirect_uri=${encodeURIComponent(jn)}&state=12345&scope=profile%20openid%20email`;function un(){const r=Xs(Oe);return e.jsxs(Rt,{children:[e.jsx(b,{path:"/callback",element:e.jsx(Mr,{})}),e.jsx(b,{path:"/liff",element:e.jsx($r,{})}),e.jsxs(b,{path:"/",element:e.jsx(Ar,{}),children:[e.jsx(b,{path:"/",element:e.jsx(zr,{}),index:!0}),e.jsx(b,{path:"register",element:e.jsx(nn,{})}),e.jsx(b,{path:"login",element:e.jsx(an,{onLogin:async i=>{try{const o=await f.post("/members/login",i),n={userId:o.data.id??null,displayName:o.data.displayName??null,pictureUrl:o.data.pictureUrl??null,userEmail:o.data.email??null};localStorage.setItem("token",o.data.token),localStorage.setItem("user",JSON.stringify(n)),r(n),window.location.href="/"}catch{alert("登入失敗")}},onLineLogin:()=>{window.location.href=mn},onRegister:()=>{window.location.href="/register"}})}),e.jsx(b,{path:"/about",element:e.jsx(Or,{})}),e.jsx(b,{path:"/project",element:e.jsx(Yr,{})}),e.jsx(b,{path:"/service",element:e.jsx(qr,{})}),e.jsxs(b,{path:"/item",element:e.jsx(Hr,{}),children:[e.jsx(b,{index:!0,element:e.jsx(fs,{})}),e.jsx(b,{path:"motorcycle",element:e.jsx(fs,{})}),e.jsx(b,{path:"car",element:e.jsx(cn,{})})]}),e.jsxs(b,{path:"/airsoft",element:e.jsx(ln,{}),children:[e.jsx(b,{index:!0,element:e.jsx(us,{})}),e.jsx(b,{path:"dashboard",element:e.jsx(us,{})})]}),e.jsxs(b,{path:"/telecommunication",element:e.jsx(on,{}),children:[e.jsx(b,{index:!0,element:e.jsx(gs,{})}),e.jsx(b,{path:"dashboard",element:e.jsx(gs,{})})]})]}),e.jsx(b,{path:"/customizer",element:e.jsx(Kr,{}),children:e.jsx(b,{index:!0,element:e.jsx(dn,{})})}),!1,e.jsx(b,{path:"oiia",element:e.jsx(hn,{})}),e.jsx(b,{path:"/*",element:e.jsx(Wr,{})})]})}At.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(gr,{children:e.jsx(Pt,{children:e.jsx(Ir,{children:e.jsx(kt,{children:e.jsx(un,{})})})})})}));export{Y as g};
